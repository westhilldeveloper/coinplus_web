(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,36737,e=>{"use strict";var t=e.i(43476),s=e.i(71645),r=e.i(18566);function l(){let[e,l]=(0,s.useState)([]),[a,i]=(0,s.useState)(!0),[n,o]=(0,s.useState)(""),[d,c]=(0,s.useState)(null),[m,x]=(0,s.useState)(null),h=(0,r.useRouter)();(0,s.useEffect)(()=>{u()},[]);let u=async()=>{try{let e=await fetch("/api/admin/gallery"),t=await e.json();if(!e.ok)throw Error(t.error||"Failed to fetch galleries");l(t.data||[]),o("")}catch(e){console.error("Fetch error:",e),o(e.message)}finally{i(!1)}},g=async e=>{c(e);try{let t=await fetch(`/api/admin/gallery/${e}`,{method:"DELETE"}),s=await t.json();if(!t.ok)throw Error(s.error||"Failed to delete gallery");l(t=>t.filter(t=>t.id!==e)),x(null)}catch(e){console.error("Delete error:",e),o(e.message)}finally{c(null)}};return a?(0,t.jsx)("div",{className:"flex justify-center py-12",children:(0,t.jsx)("div",{className:"animate-spin rounded-full h-10 w-10 border-b-2 border-blue-600"})}):n?(0,t.jsxs)("div",{className:"text-center py-12",children:[(0,t.jsx)("div",{className:"text-red-600 mb-2",children:"Error loading galleries"}),(0,t.jsx)("div",{className:"text-sm text-gray-600 mb-4",children:n}),(0,t.jsx)("button",{onClick:u,className:"px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700",children:"Try again"})]}):(0,t.jsxs)("div",{className:"space-y-6",children:[(0,t.jsxs)("div",{className:"flex justify-between items-center",children:[(0,t.jsx)("h2",{className:"text-2xl font-bold text-gray-800",children:"Galleries"}),(0,t.jsxs)("button",{onClick:()=>h.push("/admin/media/gallery/create"),className:"px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 flex items-center",children:[(0,t.jsx)("svg",{className:"w-5 h-5 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,t.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M12 4v16m8-8H4"})}),"Create Gallery"]})]}),0===e.length?(0,t.jsxs)("div",{className:"text-center py-12 text-gray-500",children:[(0,t.jsx)("svg",{className:"mx-auto h-16 w-16 text-gray-400 mb-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,t.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"1.5",d:"M4 16l4.586-4.586a2 2 0 012.828 0L16 16m-2-2l1.586-1.586a2 2 0 012.828 0L20 14m-6-6h.01M6 20h12a2 2 0 002-2V6a2 2 0 00-2-2H6a2 2 0 00-2 2v12a2 2 0 002 2z"})}),(0,t.jsx)("p",{className:"text-lg",children:"No galleries yet"}),(0,t.jsx)("p",{className:"text-sm mt-1",children:"Create your first gallery to get started"})]}):(0,t.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:e.map(e=>(0,t.jsxs)("div",{className:"bg-white rounded-lg shadow-md overflow-hidden border border-gray-200 hover:shadow-lg transition-shadow duration-300",children:[(0,t.jsxs)("div",{className:"relative h-48 w-full overflow-hidden bg-gray-100",children:[e.images.length>0?(0,t.jsx)("img",{src:e.images[0],alt:e.title,className:"w-full h-full object-cover"}):(0,t.jsx)("div",{className:"w-full h-full flex items-center justify-center text-gray-400",children:(0,t.jsx)("svg",{className:"w-12 h-12",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,t.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"1",d:"M4 16l4.586-4.586a2 2 0 012.828 0L16 16m-2-2l1.586-1.586a2 2 0 012.828 0L20 14m-6-6h.01M6 20h12a2 2 0 002-2V6a2 2 0 00-2-2H6a2 2 0 00-2 2v12a2 2 0 002 2z"})})}),(0,t.jsxs)("div",{className:"absolute top-2 right-2 bg-blue-600 text-white text-xs px-2 py-1 rounded",children:[e.images.length," photos"]})]}),(0,t.jsxs)("div",{className:"p-4",children:[(0,t.jsx)("h3",{className:"font-semibold text-lg text-gray-800 mb-2 truncate",children:e.title}),(0,t.jsx)("p",{className:"text-gray-600 text-sm mb-3 line-clamp-2",children:e.description}),(0,t.jsxs)("div",{className:"flex items-center justify-between text-sm text-gray-500 mb-4",children:[(0,t.jsxs)("div",{className:"flex items-center",children:[(0,t.jsx)("svg",{className:"w-4 h-4 mr-1",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,t.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z"})}),new Date(e.createdAt).toLocaleDateString()]}),(0,t.jsxs)("div",{className:"text-xs bg-gray-100 px-2 py-1 rounded",children:["ID: ",e.id]})]}),(0,t.jsxs)("div",{className:"flex space-x-2",children:[(0,t.jsxs)("button",{onClick:()=>{var t;return t=e.id,void h.push(`/admin/media/gallery/edit/${t}`)},className:"flex-1 px-3 py-2 bg-blue-50 text-blue-700 rounded-md hover:bg-blue-100 text-sm font-medium flex items-center justify-center",children:[(0,t.jsx)("svg",{className:"w-4 h-4 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,t.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z"})}),"Edit"]}),(0,t.jsx)("button",{onClick:()=>x(e.id),disabled:d===e.id,className:"flex-1 px-3 py-2 bg-red-50 text-red-700 rounded-md hover:bg-red-100 text-sm font-medium flex items-center justify-center disabled:opacity-50",children:d===e.id?(0,t.jsxs)(t.Fragment,{children:[(0,t.jsxs)("svg",{className:"animate-spin w-4 h-4 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:[(0,t.jsx)("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),(0,t.jsx)("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),"Deleting..."]}):(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)("svg",{className:"w-4 h-4 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,t.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})}),"Delete"]})})]})]})]},e.id))}),m&&(0,t.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50",children:(0,t.jsxs)("div",{className:"bg-white rounded-lg p-6 max-w-md w-full",children:[(0,t.jsx)("h3",{className:"text-lg font-semibold text-gray-800 mb-2",children:"Confirm Delete"}),(0,t.jsx)("p",{className:"text-gray-600 mb-6",children:"Are you sure you want to delete this gallery? This action cannot be undone."}),(0,t.jsxs)("div",{className:"flex justify-end space-x-3",children:[(0,t.jsx)("button",{onClick:()=>x(null),className:"px-4 py-2 border border-gray-300 text-gray-700 rounded-md hover:bg-gray-50",children:"Cancel"}),(0,t.jsx)("button",{onClick:()=>g(m),className:"px-4 py-2 bg-red-600 text-white rounded-md hover:bg-red-700",children:"Delete Gallery"})]})]})})]})}e.s(["default",()=>l])}]);