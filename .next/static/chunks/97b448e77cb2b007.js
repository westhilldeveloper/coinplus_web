(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,39158,e=>{"use strict";var t=e.i(43476),s=e.i(71645),a=e.i(18566);let r=!1,l=!1,o=[],n=({latitude:e,longitude:a,branchName:n,address:i})=>{let c=(0,s.useRef)(null),d=(0,s.useRef)(null),m=(0,s.useRef)(null),[h,x]=(0,s.useState)(!1);if((0,s.useEffect)(()=>{if(e&&a)return new Promise((e,t)=>{if(r)return void e();if(window.google&&window.google.maps){r=!0,e();return}if(l)return void o.push(e);l=!0;let s=document.createElement("script");s.src="https://maps.googleapis.com/maps/api/js?key=AIzaSyA6DfhegFXqMkTjJIenP7FPjCvQ8bGOYtM",s.async=!0,s.defer=!0,s.onload=()=>{r=!0,l=!1,e(),o.forEach(e=>e()),o=[]},s.onerror=e=>{l=!1,t(e)},document.head.appendChild(s)}).then(()=>{c.current&&(()=>{if(!window.google||!window.google.maps)return console.error("Google Maps not loaded");let t={center:{lat:parseFloat(e),lng:parseFloat(a)},zoom:15,mapTypeControl:!1,streetViewControl:!0,fullscreenControl:!0,zoomControl:!0,mapTypeId:window.google.maps.MapTypeId.ROADMAP,styles:[{featureType:"poi.business",stylers:[{visibility:"off"}]},{featureType:"transit",elementType:"labels.icon",stylers:[{visibility:"off"}]}]};d.current=new window.google.maps.Map(c.current,t),m.current=new window.google.maps.Marker({position:{lat:parseFloat(e),lng:parseFloat(a)},map:d.current,title:n,animation:window.google.maps.Animation.DROP,icon:{url:"data:image/svg+xml;charset=UTF-8,"+encodeURIComponent(`
            <svg xmlns="http://www.w3.org/2000/svg" width="40" height="40" viewBox="0 0 40 40">
              <circle cx="20" cy="20" r="15" fill="#2563eb" opacity="0.9"/>
              <circle cx="20" cy="20" r="6" fill="white"/>
              <circle cx="20" cy="20" r="3" fill="#2563eb"/>
            </svg>
          `),scaledSize:new window.google.maps.Size(40,40),anchor:new window.google.maps.Point(20,40)}}),new window.google.maps.InfoWindow({content:`
          <div style="padding: 12px; max-width: 250px;">
            <h3 style="margin: 0 0 8px 0; color: #1e3a8a; font-weight: 600; font-size: 14px;">${n}</h3>
            <p style="margin: 0; color: #4b5563; font-size: 13px; line-height: 1.4;">${i}</p>
            <div style="margin-top: 8px; padding-top: 8px; border-top: 1px solid #e5e7eb;">
              <a href="https://www.google.com/maps?q=${e},${a}" 
                 target="_blank" 
                 style="color: #2563eb; text-decoration: none; font-size: 13px; font-weight: 500;">
                Open in Google Maps ‚Üí
              </a>
            </div>
          </div>
        `}).open(d.current,m.current),x(!0)})()}).catch(e=>{console.error("Failed to load Google Maps:",e)}),()=>{m.current&&m.current.setMap(null),d.current}},[e,a,n,i]),!e||!a)return(0,t.jsxs)("div",{className:"bg-gray-100 h-48 rounded-lg flex flex-col items-center justify-center",children:[(0,t.jsx)("div",{className:"text-gray-400 mb-2",children:"üìç"}),(0,t.jsx)("p",{className:"text-gray-500 text-sm",children:"No location coordinates available"})]});let g=`https://www.google.com/maps?q=${e},${a}`,p=`https://www.google.com/maps/dir/?api=1&destination=${e},${a}`;return(0,t.jsxs)("div",{className:"relative",children:[(0,t.jsx)("div",{ref:c,className:"w-full h-48 rounded-lg overflow-hidden border border-gray-300"}),!h&&(0,t.jsx)("div",{className:"absolute inset-0 bg-gray-100 flex items-center justify-center",children:(0,t.jsx)("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600"})}),(0,t.jsxs)("div",{className:"absolute bottom-2 right-2 flex gap-1",children:[(0,t.jsx)("a",{href:p,target:"_blank",rel:"noopener noreferrer",className:"bg-white p-1.5 rounded shadow-sm hover:shadow transition-shadow",title:"Get Directions",children:(0,t.jsx)("svg",{className:"w-4 h-4 text-blue-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,t.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 5l7 7-7 7"})})}),(0,t.jsx)("a",{href:g,target:"_blank",rel:"noopener noreferrer",className:"bg-white p-1.5 rounded shadow-sm hover:shadow transition-shadow",title:"Open in Google Maps",children:(0,t.jsx)("svg",{className:"w-4 h-4 text-green-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,t.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M10 6H6a2 2 0 00-2 2v10a2 2 0 002 2h10a2 2 0 002-2v-4M14 4h6m0 0v6m0-6L10 14"})})})]})]})},i=({latitude:e,longitude:s,branchName:a})=>{if(!e||!s)return(0,t.jsxs)("div",{className:"bg-gray-100 h-48 rounded-lg flex flex-col items-center justify-center",children:[(0,t.jsx)("div",{className:"text-gray-400 mb-2",children:"üìç"}),(0,t.jsx)("p",{className:"text-gray-500 text-sm",children:"No location coordinates available"})]});let r=`https://maps.googleapis.com/maps/api/staticmap?center=${e},${s}&zoom=15&size=600x300&markers=color:blue%7C${e},${s}&key=AIzaSyA6DfhegFXqMkTjJIenP7FPjCvQ8bGOYtM`,l=`https://www.google.com/maps?q=${e},${s}`;return(0,t.jsx)("div",{className:"relative group",children:(0,t.jsxs)("a",{href:l,target:"_blank",rel:"noopener noreferrer",className:"block",children:[(0,t.jsx)("img",{src:r,alt:`${a} location`,className:"w-full h-48 rounded-lg object-cover border border-gray-300",onError:t=>{t.target.onerror=null,t.target.src=`https://maps.googleapis.com/maps/api/staticmap?center=${e},${s}&zoom=15&size=600x300&markers=color:blue%7C${e},${s}`}}),(0,t.jsx)("div",{className:"absolute inset-0 bg-gradient-to-t from-black/10 to-transparent rounded-lg group-hover:from-black/20 transition-all"}),(0,t.jsx)("div",{className:"absolute bottom-2 left-2 bg-black/70 text-white px-2 py-1 rounded text-xs",children:"Click to open in Google Maps"})]})})},c=()=>new Promise((e,t)=>{if(r)return void e();if(window.google&&window.google.maps){r=!0,e();return}if(l)return void o.push(e);l=!0;let s=document.createElement("script");s.src="https://maps.googleapis.com/maps/api/js?key=AIzaSyA6DfhegFXqMkTjJIenP7FPjCvQ8bGOYtM",s.async=!0,s.defer=!0,s.onload=()=>{r=!0,l=!1,e(),o.forEach(e=>e()),o=[]},s.onerror=t,document.head.appendChild(s)});e.s(["default",0,()=>{let e=(0,a.useSearchParams)();(0,a.useRouter)();let r=e.get("state"),l=e.get("branch"),o=e.get("branchId");console.log("url state",r,l,o);let[d,m]=(0,s.useState)({}),[h,x]=(0,s.useState)(r||""),[g,p]=(0,s.useState)(l||null),[u,f]=(0,s.useState)(!0),[b,y]=(0,s.useState)(!0),[j,w]=(0,s.useState)(!1);return(console.log("selected state and branch===>",h,g),(0,s.useEffect)(()=>{c().then(()=>{w(!0)}).catch(console.error)},[]),(0,s.useEffect)(()=>{(async()=>{try{let e=await fetch("/api/admin/branches"),t=(await e.json()).reduce((e,t)=>(e[t.state]||(e[t.state]=[]),e[t.state].push(t),e),{});if(m(t),r&&t[r]){x(r);let e=t[r].find(e=>e.name===l||String(e.id)===String(o));e?p(e):p(t[r][0]);return}let s=Object.keys(t)[0];s&&(x(s),p(t[s][0]))}catch(e){console.error("Error fetching branches:",e)}finally{f(!1)}})()},[r,l,o]),u)?(0,t.jsx)("div",{className:"w-full mx-auto p-8 text-center",children:(0,t.jsx)("div",{className:"text-lg",children:"Loading branches..."})}):0===Object.keys(d).length?(0,t.jsx)("div",{className:"w-full mx-auto p-8 text-center",children:(0,t.jsx)("div",{className:"text-lg text-gray-500",children:"No branches found"})}):(0,t.jsxs)("div",{className:"w-full mx-auto p-4 md:p-6 lg:p-8 font-sans",children:[(0,t.jsx)("h1",{className:"text-lg md:text-xl font-bold text-primary mb-8",children:"Branches"}),(0,t.jsxs)("div",{className:"flex flex-col lg:flex-row gap-6",children:[(0,t.jsxs)("div",{className:"lg:w-1/4",children:[(0,t.jsx)("h2",{className:"text-md md:text-lg font-semibold text-gray-700 mb-4",children:"Select State"}),(0,t.jsx)("div",{className:"flex flex-wrap lg:flex-col text-sm gap-2",children:Object.keys(d).map(e=>(0,t.jsx)("button",{onClick:()=>{x(e),d[e]&&d[e].length>0&&p(d[e][0])},className:`px-4 py-3 rounded-lg text-left transition-colors ${h===e?"bg-primary text-white font-semibold":"bg-gray-100 text-gray-700 hover:bg-gray-200"}`,children:e},e))})]}),(0,t.jsxs)("div",{className:"lg:w-1/3",children:[(0,t.jsxs)("h2",{className:"text-md md:text-lg font-semibold text-gray-700 mb-4",children:["Branches in ",h]}),(0,t.jsx)("div",{className:"space-y-2 text-sm",children:d[h]?.map(e=>(0,t.jsx)("button",{onClick:()=>{p(e)},className:`w-full text-left px-4 py-3 rounded-lg transition-colors ${g?.id===e.id?"bg-primary/20 border-l-4 border-primary":"bg-gray-50 hover:bg-gray-100"}`,children:(0,t.jsx)("span",{className:"font-medium text-gray-800",children:e.name})},e.id))})]}),(0,t.jsxs)("div",{className:"lg:w-2/4",children:[(0,t.jsx)("h2",{className:"text-md md:text-lg font-semibold text-gray-700 mb-4",children:"Branch Details"}),g?(0,t.jsxs)("div",{className:"bg-white p-6 rounded-xl border border-gray-300 shadow-sm",children:[(0,t.jsx)("h3",{className:"text-lg md:text-xl font-bold text-primary mb-4",children:g.name}),(0,t.jsxs)("div",{className:"space-y-4",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("h4",{className:"font-semibold text-gray-700 mb-2",children:"Address"}),(0,t.jsxs)("p",{className:"text-gray-600 text-sm",children:[g.address,",",(0,t.jsx)("br",{}),g.city,", ",g.state]}),(0,t.jsxs)("p",{className:"text-gray-600 mt-1",children:[(0,t.jsx)("span",{className:"font-medium text-sm",children:"Pin:"})," ",g.pincode]})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("h4",{className:"font-semibold text-gray-700 text-sm mb-2",children:"Contact Information"}),(0,t.jsxs)("div",{className:"space-y-2 text-sm",children:[(0,t.jsxs)("p",{className:"text-gray-600",children:[(0,t.jsx)("span",{className:"font-medium",children:"Email:"})," ",(0,t.jsx)("a",{href:`mailto:${g.email}`,className:"text-primary/50 hover:text-primary hover:underline transition-colors",children:g.email})]}),(0,t.jsxs)("p",{className:"text-gray-600",children:[(0,t.jsx)("span",{className:"font-medium",children:"Phone 1:"})," ",(0,t.jsx)("a",{href:`tel:${g.phone1}`,className:"text-primary/50 hover:text-primary hover:underline transition-colors",children:g.phone1})]}),g.phone2&&(0,t.jsxs)("p",{className:"text-gray-600",children:[(0,t.jsx)("span",{className:"font-medium",children:"Phone 2:"})," ",(0,t.jsx)("a",{href:`tel:${g.phone2}`,className:"text-primary/60 hover:text-primary hover:underline transition-colors",children:g.phone2})]})]})]}),(0,t.jsxs)("div",{className:"mt-6 pt-6 border-t border-gray-200",children:[(0,t.jsxs)("div",{className:"flex justify-between items-center mb-2",children:[(0,t.jsx)("h4",{className:"font-semibold text-gray-700",children:"Location"}),g.latitude&&g.longitude&&(0,t.jsx)("button",{onClick:()=>y(!b),className:"text-xs text-primary hover:text-primary-dark",children:b?"Switch to Static Map":"Switch to Interactive Map"})]}),g.latitude&&g.longitude?b?(0,t.jsx)(n,{latitude:g.latitude,longitude:g.longitude,branchName:g.name,address:`${g.address}, ${g.city}`}):(0,t.jsx)(i,{latitude:g.latitude,longitude:g.longitude,branchName:g.name}):(0,t.jsxs)("div",{className:"bg-gray-100 h-48 rounded-lg flex flex-col items-center justify-center",children:[(0,t.jsx)("div",{className:"text-gray-400 mb-2",children:"üìç"}),(0,t.jsx)("p",{className:"text-gray-500 text-sm",children:"No location coordinates available"}),(0,t.jsx)("p",{className:"text-xs text-gray-400 mt-1",children:"Latitude/Longitude not provided for this branch"})]}),g.latitude&&g.longitude&&(0,t.jsxs)("div",{className:"mt-2 text-xs text-gray-500 flex justify-between",children:[(0,t.jsxs)("span",{children:["Coordinates: ",g.latitude,", ",g.longitude]}),(0,t.jsx)("a",{href:`https://www.google.com/maps?q=${g.latitude},${g.longitude}`,target:"_blank",rel:"noopener noreferrer",className:"text-primary hover:underline",children:"Open in new tab ‚Üí"})]})]})]})]}):(0,t.jsx)("div",{className:"bg-gray-50 p-8 rounded-xl border border-gray-300 text-center",children:(0,t.jsx)("p",{className:"text-gray-500",children:"Select a branch to view details"})})]})]})]})},"loadGoogleMapsScript",0,c])}]);