module.exports=[12570,a=>{"use strict";var b=a.i(87924),c=a.i(72131),d=a.i(50944),e=a.i(70106);let f=(0,e.default)("plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]),g=(0,e.default)("square-pen",[["path",{d:"M12 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1m0v6g"}],["path",{d:"M18.375 2.625a1 1 0 0 1 3 3l-9.013 9.014a2 2 0 0 1-.853.505l-2.873.84a.5.5 0 0 1-.62-.62l.84-2.873a2 2 0 0 1 .506-.852z",key:"ohrbg2"}]]),h=(0,e.default)("trash-2",[["path",{d:"M10 11v6",key:"nco0om"}],["path",{d:"M14 11v6",key:"outv1u"}],["path",{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6",key:"miytrc"}],["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M8 6V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2",key:"e791ji"}]]);var i=a.i(87532),j=a.i(24987),k=a.i(63519),l=a.i(92258),m=a.i(63910),n=a.i(33508);let o=(0,e.default)("save",[["path",{d:"M15.2 3a2 2 0 0 1 1.4.6l3.8 3.8a2 2 0 0 1 .6 1.4V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2z",key:"1c8476"}],["path",{d:"M17 21v-7a1 1 0 0 0-1-1H8a1 1 0 0 0-1 1v7",key:"1ydtos"}],["path",{d:"M7 3v4a1 1 0 0 0 1 1h7",key:"t51u73"}]]);var p=a.i(13749),q=a.i(50522);function r(){let[a,e]=(0,c.useState)([]),[r,s]=(0,c.useState)(!0),[t,u]=(0,c.useState)(!1),[v,w]=(0,c.useState)(null),[x,y]=(0,c.useState)(""),[z,A]=(0,c.useState)(1),[B]=(0,c.useState)(10);(0,d.useRouter)();let[C,D]=(0,c.useState)({name:"",address:"",city:"",state:"",pincode:"",email:"",phone1:"",phone2:"",latitude:"",longitude:""}),E=async()=>{try{let a=await fetch("/api/admin/branches"),b=await a.json();e(b)}catch(a){console.error("Error fetching branches:",a)}finally{s(!1)}};(0,c.useEffect)(()=>{E()},[]);let F=a=>{let{name:b,value:c}=a.target;D(a=>({...a,[b]:c}))},G=()=>{D({name:"",address:"",city:"",state:"",pincode:"",email:"",phone1:"",phone2:"",latitude:"",longitude:""}),w(null)},H=async a=>{a.preventDefault();try{let a=v?`/api/admin/branches/${v.id}`:"/api/admin/branches",b=v?"PUT":"POST",c=await fetch(a,{method:b,headers:{"Content-Type":"application/json"},body:JSON.stringify(C)});if(c.ok)await E(),u(!1),G();else{let a=await c.json();alert(`Error: ${a.error}`)}}catch(a){console.error("Error saving branch:",a),alert("Failed to save branch")}},I=async(a,b)=>{if(confirm(`Are you sure you want to delete branch: ${b}?`))try{let b=await fetch(`/api/admin/branches/${a}`,{method:"DELETE"});if(b.ok)await E();else{let a=await b.json();alert(`Error: ${a.error}`)}}catch(a){console.error("Error deleting branch:",a),alert("Failed to delete branch")}},J=a.filter(a=>a.name.toLowerCase().includes(x.toLowerCase())||a.city.toLowerCase().includes(x.toLowerCase())||a.state.toLowerCase().includes(x.toLowerCase())),K=Math.ceil(J.length/B),L=(z-1)*B,M=J.slice(L,L+B),N=a=>{A(a)},O=async()=>{if(!C.address||!C.city||!C.state)return void alert("Please fill in address, city, and state first");let a=`${C.address}, ${C.city}, ${C.state}, India`;try{let b=await fetch(`https://nominatim.openstreetmap.org/search?format=json&q=${encodeURIComponent(a)}&limit=1`),c=await b.json();c&&c.length>0?D(a=>({...a,latitude:c[0].lat,longitude:c[0].lon})):alert("Could not find coordinates for this address")}catch(a){console.error("Error fetching coordinates:",a),alert("Failed to fetch coordinates")}};return r?(0,b.jsx)("div",{className:"flex items-center justify-center min-h-screen",children:(0,b.jsx)("div",{className:"text-lg",children:"Loading..."})}):(0,b.jsxs)("div",{className:"min-h-screen bg-gray-50 p-4 md:p-6",children:[(0,b.jsxs)("div",{className:"mb-8",children:[(0,b.jsxs)("div",{className:"flex flex-col md:flex-row md:items-center justify-between mb-6",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("h1",{className:"text-2xl md:text-3xl font-bold text-gray-800",children:"Branch Management"}),(0,b.jsx)("p",{className:"text-gray-600 mt-2",children:"Manage all branch locations and details"})]}),(0,b.jsxs)("button",{onClick:()=>{G(),u(!0)},className:"mt-4 md:mt-0 flex items-center gap-2 px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors",children:[(0,b.jsx)(f,{size:20}),"Add New Branch"]})]}),(0,b.jsxs)("div",{className:"relative max-w-md",children:[(0,b.jsx)(i.Search,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400",size:20}),(0,b.jsx)("input",{type:"text",placeholder:"Search branches by name, city, or state...",value:x,onChange:a=>y(a.target.value),className:"w-full pl-10 pr-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 outline-none"})]})]}),(0,b.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4 mb-8",children:[(0,b.jsx)("div",{className:"bg-white p-4 rounded-xl border border-gray-200 shadow-sm",children:(0,b.jsxs)("div",{className:"flex items-center gap-3",children:[(0,b.jsx)("div",{className:"p-2 bg-blue-100 rounded-lg",children:(0,b.jsx)(m.Building,{className:"text-blue-600",size:24})}),(0,b.jsxs)("div",{children:[(0,b.jsx)("p",{className:"text-sm text-gray-600",children:"Total Branches"}),(0,b.jsx)("p",{className:"text-2xl font-bold text-gray-800",children:a.length})]})]})}),(0,b.jsx)("div",{className:"bg-white p-4 rounded-xl border border-gray-200 shadow-sm",children:(0,b.jsxs)("div",{className:"flex items-center gap-3",children:[(0,b.jsx)("div",{className:"p-2 bg-green-100 rounded-lg",children:(0,b.jsx)(j.MapPin,{className:"text-green-600",size:24})}),(0,b.jsxs)("div",{children:[(0,b.jsx)("p",{className:"text-sm text-gray-600",children:"States Covered"}),(0,b.jsx)("p",{className:"text-2xl font-bold text-gray-800",children:[...new Set(a.map(a=>a.state))].length})]})]})}),(0,b.jsx)("div",{className:"bg-white p-4 rounded-xl border border-gray-200 shadow-sm",children:(0,b.jsxs)("div",{className:"flex items-center gap-3",children:[(0,b.jsx)("div",{className:"p-2 bg-purple-100 rounded-lg",children:(0,b.jsx)(k.Phone,{className:"text-purple-600",size:24})}),(0,b.jsxs)("div",{children:[(0,b.jsx)("p",{className:"text-sm text-gray-600",children:"Total Contacts"}),(0,b.jsx)("p",{className:"text-2xl font-bold text-gray-800",children:2*a.length})]})]})}),(0,b.jsx)("div",{className:"bg-white p-4 rounded-xl border border-gray-200 shadow-sm",children:(0,b.jsxs)("div",{className:"flex items-center gap-3",children:[(0,b.jsx)("div",{className:"p-2 bg-orange-100 rounded-lg",children:(0,b.jsx)(l.Mail,{className:"text-orange-600",size:24})}),(0,b.jsxs)("div",{children:[(0,b.jsx)("p",{className:"text-sm text-gray-600",children:"Active Emails"}),(0,b.jsx)("p",{className:"text-2xl font-bold text-gray-800",children:a.length})]})]})})]}),(0,b.jsxs)("div",{className:"bg-white rounded-xl border border-gray-200 shadow-sm overflow-hidden",children:[(0,b.jsx)("div",{className:"overflow-x-auto",children:(0,b.jsxs)("table",{className:"min-w-full divide-y divide-gray-200",children:[(0,b.jsx)("thead",{className:"bg-gray-50",children:(0,b.jsxs)("tr",{children:[(0,b.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Branch Name"}),(0,b.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Location"}),(0,b.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Contact"}),(0,b.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Status"}),(0,b.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Actions"})]})}),(0,b.jsx)("tbody",{className:"bg-white divide-y divide-gray-200",children:0===M.length?(0,b.jsx)("tr",{children:(0,b.jsx)("td",{colSpan:"5",className:"px-6 py-8 text-center text-gray-500",children:"No branches found"})}):M.map(a=>(0,b.jsxs)("tr",{className:"hover:bg-gray-50",children:[(0,b.jsx)("td",{className:"px-6 py-4",children:(0,b.jsxs)("div",{children:[(0,b.jsx)("p",{className:"font-medium text-gray-900",children:a.name}),(0,b.jsx)("p",{className:"text-sm text-gray-500",children:a.email})]})}),(0,b.jsx)("td",{className:"px-6 py-4",children:(0,b.jsxs)("div",{children:[(0,b.jsxs)("p",{className:"text-gray-900",children:[a.city,", ",a.state]}),(0,b.jsx)("p",{className:"text-sm text-gray-500",children:a.pincode})]})}),(0,b.jsx)("td",{className:"px-6 py-4",children:(0,b.jsxs)("div",{children:[(0,b.jsx)("p",{className:"text-gray-900",children:a.phone1}),a.phone2&&(0,b.jsx)("p",{className:"text-sm text-gray-500",children:a.phone2})]})}),(0,b.jsx)("td",{className:"px-6 py-4",children:(0,b.jsx)("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-green-100 text-green-800",children:"Active"})}),(0,b.jsx)("td",{className:"px-6 py-4",children:(0,b.jsxs)("div",{className:"flex items-center gap-2",children:[(0,b.jsx)("button",{onClick:()=>{D({name:a.name,address:a.address,city:a.city,state:a.state,pincode:a.pincode,email:a.email,phone1:a.phone1,phone2:a.phone2||"",latitude:a.latitude||"",longitude:a.longitude||""}),w(a),u(!0)},className:"p-1.5 text-blue-600 hover:bg-blue-50 rounded-md transition-colors",title:"Edit",children:(0,b.jsx)(g,{size:18})}),(0,b.jsx)("button",{onClick:()=>I(a.id,a.name),className:"p-1.5 text-red-600 hover:bg-red-50 rounded-md transition-colors",title:"Delete",children:(0,b.jsx)(h,{size:18})})]})})]},a.id))})]})}),K>1&&(0,b.jsxs)("div",{className:"px-6 py-4 border-t border-gray-200 flex items-center justify-between",children:[(0,b.jsxs)("div",{className:"text-sm text-gray-700",children:["Showing ",L+1," to ",Math.min(L+B,J.length)," of"," ",J.length," results"]}),(0,b.jsxs)("div",{className:"flex items-center gap-2",children:[(0,b.jsx)("button",{onClick:()=>N(z-1),disabled:1===z,className:"p-2 rounded-md border border-gray-300 disabled:opacity-50 disabled:cursor-not-allowed hover:bg-gray-50",children:(0,b.jsx)(p.ChevronLeft,{size:20})}),Array.from({length:K},(a,b)=>b+1).map(a=>(0,b.jsx)("button",{onClick:()=>N(a),className:`px-3 py-1 rounded-md ${z===a?"bg-blue-600 text-white":"border border-gray-300 hover:bg-gray-50"}`,children:a},a)),(0,b.jsx)("button",{onClick:()=>N(z+1),disabled:z===K,className:"p-2 rounded-md border border-gray-300 disabled:opacity-50 disabled:cursor-not-allowed hover:bg-gray-50",children:(0,b.jsx)(q.ChevronRight,{size:20})})]})]})]}),t&&(0,b.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50",children:(0,b.jsx)("div",{className:"bg-white rounded-xl max-w-2xl w-full max-h-[90vh] overflow-y-auto",children:(0,b.jsxs)("div",{className:"p-6",children:[(0,b.jsxs)("div",{className:"flex items-center justify-between mb-6",children:[(0,b.jsx)("h2",{className:"text-xl font-bold text-gray-800",children:v?"Edit Branch":"Add New Branch"}),(0,b.jsx)("button",{onClick:()=>{u(!1),G()},className:"p-1 hover:bg-gray-100 rounded-md",children:(0,b.jsx)(n.X,{size:24})})]}),(0,b.jsxs)("form",{onSubmit:H,className:"space-y-6",children:[(0,b.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Branch Name *"}),(0,b.jsx)("input",{type:"text",name:"name",value:C.name,onChange:F,required:!0,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 outline-none",placeholder:"Enter branch name"})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"State *"}),(0,b.jsxs)("select",{name:"state",value:C.state,onChange:F,required:!0,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 outline-none",children:[(0,b.jsx)("option",{value:"",children:"Select State"}),["TAMIL NADU","KARNATAKA","KERALA"].map(a=>(0,b.jsx)("option",{value:a,children:a},a))]})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"City *"}),(0,b.jsx)("input",{type:"text",name:"city",value:C.city,onChange:F,required:!0,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 outline-none",placeholder:"Enter city"})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Pincode *"}),(0,b.jsx)("input",{type:"text",name:"pincode",value:C.pincode,onChange:F,required:!0,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 outline-none",placeholder:"Enter pincode"})]})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Address *"}),(0,b.jsx)("textarea",{name:"address",value:C.address,onChange:F,required:!0,rows:"3",className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 outline-none",placeholder:"Enter complete address"})]}),(0,b.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Email *"}),(0,b.jsx)("input",{type:"email",name:"email",value:C.email,onChange:F,required:!0,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 outline-none",placeholder:"Enter email address"})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Phone 1 *"}),(0,b.jsx)("input",{type:"tel",name:"phone1",value:C.phone1,onChange:F,required:!0,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 outline-none",placeholder:"Enter primary phone number"})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Phone 2 (Optional)"}),(0,b.jsx)("input",{type:"tel",name:"phone2",value:C.phone2,onChange:F,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 outline-none",placeholder:"Enter secondary phone number"})]}),(0,b.jsxs)("div",{className:"md:col-span-2",children:[(0,b.jsxs)("div",{className:"flex items-center justify-between mb-2",children:[(0,b.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:"Coordinates (Optional)"}),(0,b.jsxs)("button",{type:"button",onClick:O,className:"text-sm text-blue-600 hover:text-blue-800 flex items-center gap-1",children:[(0,b.jsx)(j.MapPin,{size:16}),"Get from Address"]})]}),(0,b.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,b.jsx)("input",{type:"number",step:"any",name:"latitude",value:C.latitude,onChange:F,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 outline-none",placeholder:"Latitude"}),(0,b.jsx)("input",{type:"number",step:"any",name:"longitude",value:C.longitude,onChange:F,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 outline-none",placeholder:"Longitude"})]})]})]}),(0,b.jsxs)("div",{className:"flex justify-end gap-3 pt-4 border-t border-gray-200",children:[(0,b.jsx)("button",{type:"button",onClick:()=>{u(!1),G()},className:"px-4 py-2 border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50 transition-colors",children:"Cancel"}),(0,b.jsxs)("button",{type:"submit",className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors flex items-center gap-2",children:[(0,b.jsx)(o,{size:18}),v?"Update Branch":"Create Branch"]})]})]})]})})})]})}a.s(["default",()=>r],12570)}];

//# sourceMappingURL=app_admin_branches_page_jsx_5997c4e8._.js.map