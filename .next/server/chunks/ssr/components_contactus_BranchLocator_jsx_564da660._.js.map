{"version":3,"sources":["../../../../components/contactus/BranchLocator.jsx"],"sourcesContent":["// components/BranchLocator.js\r\n\"use client\";\r\nimport React, { useState, useEffect, useRef } from 'react';\r\nimport { useRouter, useSearchParams } from 'next/navigation';\r\n\r\n// Track if Google Maps script is already loaded globally\r\nlet googleMapsLoaded = false;\r\nlet googleMapsLoading = false;\r\nlet googleMapsLoadCallbacks = [];\r\n\r\n// Google Maps component\r\nconst BranchMap = ({ latitude, longitude, branchName, address }) => {\r\n  const mapRef = useRef(null);\r\n  const mapInstanceRef = useRef(null);\r\n  const markerRef = useRef(null);\r\n  const [mapReady, setMapReady] = useState(false);\r\n\r\n  useEffect(() => {\r\n    if (!latitude || !longitude) return;\r\n\r\n    const initializeMap = () => {\r\n      // Check if Google Maps is loaded\r\n      if (!window.google || !window.google.maps) {\r\n        console.error('Google Maps not loaded');\r\n        return;\r\n      }\r\n\r\n      const mapOptions = {\r\n        center: { lat: parseFloat(latitude), lng: parseFloat(longitude) },\r\n        zoom: 15,\r\n        mapTypeControl: false,\r\n        streetViewControl: true,\r\n        fullscreenControl: true,\r\n        zoomControl: true,\r\n        mapTypeId: window.google.maps.MapTypeId.ROADMAP,\r\n        styles: [\r\n          {\r\n            \"featureType\": \"poi.business\",\r\n            \"stylers\": [{ \"visibility\": \"off\" }]\r\n          },\r\n          {\r\n            \"featureType\": \"transit\",\r\n            \"elementType\": \"labels.icon\",\r\n            \"stylers\": [{ \"visibility\": \"off\" }]\r\n          }\r\n        ]\r\n      };\r\n\r\n      // Create map\r\n      mapInstanceRef.current = new window.google.maps.Map(mapRef.current, mapOptions);\r\n\r\n      // Create marker\r\n      markerRef.current = new window.google.maps.Marker({\r\n        position: { lat: parseFloat(latitude), lng: parseFloat(longitude) },\r\n        map: mapInstanceRef.current,\r\n        title: branchName,\r\n        animation: window.google.maps.Animation.DROP,\r\n        icon: {\r\n          url: 'data:image/svg+xml;charset=UTF-8,' + encodeURIComponent(`\r\n            <svg xmlns=\"http://www.w3.org/2000/svg\" width=\"40\" height=\"40\" viewBox=\"0 0 40 40\">\r\n              <circle cx=\"20\" cy=\"20\" r=\"15\" fill=\"#2563eb\" opacity=\"0.9\"/>\r\n              <circle cx=\"20\" cy=\"20\" r=\"6\" fill=\"white\"/>\r\n              <circle cx=\"20\" cy=\"20\" r=\"3\" fill=\"#2563eb\"/>\r\n            </svg>\r\n          `),\r\n          scaledSize: new window.google.maps.Size(40, 40),\r\n          anchor: new window.google.maps.Point(20, 40)\r\n        }\r\n      });\r\n\r\n      // Add info window\r\n      const infoWindow = new window.google.maps.InfoWindow({\r\n        content: `\r\n          <div style=\"padding: 12px; max-width: 250px;\">\r\n            <h3 style=\"margin: 0 0 8px 0; color: #1e3a8a; font-weight: 600; font-size: 14px;\">${branchName}</h3>\r\n            <p style=\"margin: 0; color: #4b5563; font-size: 13px; line-height: 1.4;\">${address}</p>\r\n            <div style=\"margin-top: 8px; padding-top: 8px; border-top: 1px solid #e5e7eb;\">\r\n              <a href=\"https://www.google.com/maps?q=${latitude},${longitude}\" \r\n                 target=\"_blank\" \r\n                 style=\"color: #2563eb; text-decoration: none; font-size: 13px; font-weight: 500;\">\r\n                Open in Google Maps ‚Üí\r\n              </a>\r\n            </div>\r\n          </div>\r\n        `,\r\n      });\r\n\r\n      // Open info window by default\r\n      infoWindow.open(mapInstanceRef.current, markerRef.current);\r\n      setMapReady(true);\r\n    };\r\n\r\n    // Function to load Google Maps script\r\n    const loadGoogleMaps = () => {\r\n      return new Promise((resolve, reject) => {\r\n        if (googleMapsLoaded) {\r\n          resolve();\r\n          return;\r\n        }\r\n\r\n        if (window.google && window.google.maps) {\r\n          googleMapsLoaded = true;\r\n          resolve();\r\n          return;\r\n        }\r\n\r\n        // Add to callbacks if already loading\r\n        if (googleMapsLoading) {\r\n          googleMapsLoadCallbacks.push(resolve);\r\n          return;\r\n        }\r\n\r\n        googleMapsLoading = true;\r\n\r\n        const script = document.createElement('script');\r\n        script.src = `https://maps.googleapis.com/maps/api/js?key=${process.env.NEXT_PUBLIC_GOOGLE_MAPS_API_KEY}`;\r\n        script.async = true;\r\n        script.defer = true;\r\n        \r\n        script.onload = () => {\r\n          googleMapsLoaded = true;\r\n          googleMapsLoading = false;\r\n          resolve();\r\n          // Resolve all waiting callbacks\r\n          googleMapsLoadCallbacks.forEach(cb => cb());\r\n          googleMapsLoadCallbacks = [];\r\n        };\r\n        \r\n        script.onerror = (error) => {\r\n          googleMapsLoading = false;\r\n          reject(error);\r\n        };\r\n\r\n        document.head.appendChild(script);\r\n      });\r\n    };\r\n\r\n    // Load and initialize\r\n    loadGoogleMaps()\r\n      .then(() => {\r\n        if (mapRef.current) {\r\n          initializeMap();\r\n        }\r\n      })\r\n      .catch(error => {\r\n        console.error('Failed to load Google Maps:', error);\r\n      });\r\n\r\n    // Cleanup\r\n    return () => {\r\n      if (markerRef.current) {\r\n        markerRef.current.setMap(null);\r\n      }\r\n      if (mapInstanceRef.current) {\r\n        // No explicit destroy needed\r\n      }\r\n    };\r\n  }, [latitude, longitude, branchName, address]);\r\n\r\n  if (!latitude || !longitude) {\r\n    return (\r\n      <div className=\"bg-gray-100 h-48 rounded-lg flex flex-col items-center justify-center\">\r\n        <div className=\"text-gray-400 mb-2\">üìç</div>\r\n        <p className=\"text-gray-500 text-sm\">No location coordinates available</p>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  const googleMapsUrl = `https://www.google.com/maps?q=${latitude},${longitude}`;\r\n  const directionsUrl = `https://www.google.com/maps/dir/?api=1&destination=${latitude},${longitude}`;\r\n\r\n  return (\r\n    <div className=\"relative\">\r\n      <div\r\n        ref={mapRef}\r\n        className=\"w-full h-48 rounded-lg overflow-hidden border border-gray-300\"\r\n      />\r\n      {!mapReady && (\r\n        <div className=\"absolute inset-0 bg-gray-100 flex items-center justify-center\">\r\n          <div className=\"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600\"></div>\r\n        </div>\r\n      )}\r\n      <div className=\"absolute bottom-2 right-2 flex gap-1\">\r\n        <a\r\n          href={directionsUrl}\r\n          target=\"_blank\"\r\n          rel=\"noopener noreferrer\"\r\n          className=\"bg-white p-1.5 rounded shadow-sm hover:shadow transition-shadow\"\r\n          title=\"Get Directions\"\r\n        >\r\n          <svg className=\"w-4 h-4 text-blue-600\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\r\n            <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M9 5l7 7-7 7\" />\r\n          </svg>\r\n        </a>\r\n        <a\r\n          href={googleMapsUrl}\r\n          target=\"_blank\"\r\n          rel=\"noopener noreferrer\"\r\n          className=\"bg-white p-1.5 rounded shadow-sm hover:shadow transition-shadow\"\r\n          title=\"Open in Google Maps\"\r\n        >\r\n          <svg className=\"w-4 h-4 text-green-600\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\r\n            <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M10 6H6a2 2 0 00-2 2v10a2 2 0 002 2h10a2 2 0 002-2v-4M14 4h6m0 0v6m0-6L10 14\" />\r\n          </svg>\r\n        </a>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\n// Simple static map fallback (no JavaScript required)\r\nconst SimpleStaticMap = ({ latitude, longitude, branchName }) => {\r\n  if (!latitude || !longitude) {\r\n    return (\r\n      <div className=\"bg-gray-100 h-48 rounded-lg flex flex-col items-center justify-center\">\r\n        <div className=\"text-gray-400 mb-2\">üìç</div>\r\n        <p className=\"text-gray-500 text-sm\">No location coordinates available</p>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  const staticMapUrl = `https://maps.googleapis.com/maps/api/staticmap?center=${latitude},${longitude}&zoom=15&size=600x300&markers=color:blue%7C${latitude},${longitude}&key=${process.env.NEXT_PUBLIC_GOOGLE_MAPS_API_KEY}`;\r\n  const googleMapsUrl = `https://www.google.com/maps?q=${latitude},${longitude}`;\r\n\r\n  return (\r\n    <div className=\"relative group\">\r\n      <a\r\n        href={googleMapsUrl}\r\n        target=\"_blank\"\r\n        rel=\"noopener noreferrer\"\r\n        className=\"block\"\r\n      >\r\n        <img\r\n          src={staticMapUrl}\r\n          alt={`${branchName} location`}\r\n          className=\"w-full h-48 rounded-lg object-cover border border-gray-300\"\r\n          onError={(e) => {\r\n            e.target.onerror = null;\r\n            e.target.src = `https://maps.googleapis.com/maps/api/staticmap?center=${latitude},${longitude}&zoom=15&size=600x300&markers=color:blue%7C${latitude},${longitude}`;\r\n          }}\r\n        />\r\n        <div className=\"absolute inset-0 bg-gradient-to-t from-black/10 to-transparent rounded-lg group-hover:from-black/20 transition-all\" />\r\n        <div className=\"absolute bottom-2 left-2 bg-black/70 text-white px-2 py-1 rounded text-xs\">\r\n          Click to open in Google Maps\r\n        </div>\r\n      </a>\r\n    </div>\r\n  );\r\n};\r\n\r\n// Alternative: Load script at page level instead of component level\r\nexport const loadGoogleMapsScript = () => {\r\n  if (typeof window === 'undefined') return Promise.resolve();\r\n  \r\n  return new Promise((resolve, reject) => {\r\n    if (googleMapsLoaded) {\r\n      resolve();\r\n      return;\r\n    }\r\n\r\n    if (window.google && window.google.maps) {\r\n      googleMapsLoaded = true;\r\n      resolve();\r\n      return;\r\n    }\r\n\r\n    if (googleMapsLoading) {\r\n      googleMapsLoadCallbacks.push(resolve);\r\n      return;\r\n    }\r\n\r\n    googleMapsLoading = true;\r\n\r\n    const script = document.createElement('script');\r\n    script.src = `https://maps.googleapis.com/maps/api/js?key=${process.env.NEXT_PUBLIC_GOOGLE_MAPS_API_KEY}`;\r\n    script.async = true;\r\n    script.defer = true;\r\n    \r\n    script.onload = () => {\r\n      googleMapsLoaded = true;\r\n      googleMapsLoading = false;\r\n      resolve();\r\n      googleMapsLoadCallbacks.forEach(cb => cb());\r\n      googleMapsLoadCallbacks = [];\r\n    };\r\n    \r\n    script.onerror = reject;\r\n\r\n    document.head.appendChild(script);\r\n  });\r\n};\r\n\r\n// Main BranchLocator component\r\nconst BranchLocator = () => {\r\n   const searchParams = useSearchParams();\r\n  const router = useRouter();\r\n\r\n  const urlState = searchParams.get('state');\r\n  const urlBranchName = searchParams.get('branch');\r\n  const urlBranchId = searchParams.get('branchId');\r\n\r\n  console.log(\"url state\",urlState, urlBranchName, urlBranchId)\r\n\r\n  const [branchData, setBranchData] = useState({});\r\n  const [selectedState, setSelectedState] = useState(urlState ||'');\r\n  const [selectedBranch, setSelectedBranch] = useState(urlBranchName || null);\r\n  const [loading, setLoading] = useState(true);\r\n  const [useInteractiveMap, setUseInteractiveMap] = useState(true);\r\n  const [mapsScriptLoaded, setMapsScriptLoaded] = useState(false);\r\n\r\n  console.log(\"selected state and branch===>\",selectedState, selectedBranch)\r\n\r\n  // Pre-load Google Maps script when component mounts\r\n  useEffect(() => {\r\n    if (typeof window !== 'undefined') {\r\n      loadGoogleMapsScript().then(() => {\r\n        setMapsScriptLoaded(true);\r\n      }).catch(console.error);\r\n    }\r\n  }, []);\r\n\r\n  useEffect(() => {\r\n  const fetchBranches = async () => {\r\n    try {\r\n      const response = await fetch('/api/admin/branches');\r\n      const data = await response.json();\r\n\r\n      const groupedData = data.reduce((acc, branch) => {\r\n        if (!acc[branch.state]) {\r\n          acc[branch.state] = [];\r\n        }\r\n        acc[branch.state].push(branch);\r\n        return acc;\r\n      }, {});\r\n\r\n      setBranchData(groupedData);\r\n\r\n      // ‚úÖ CASE 1: URL params exist ‚Üí respect them\r\n      if (urlState && groupedData[urlState]) {\r\n        setSelectedState(urlState);\r\n\r\n        // Find branch by name OR id\r\n        const matchedBranch =\r\n          groupedData[urlState].find(\r\n            (b) =>\r\n              b.name === urlBranchName ||\r\n              String(b.id) === String(urlBranchId)\r\n          );\r\n\r\n        if (matchedBranch) {\r\n          setSelectedBranch(matchedBranch);\r\n        } else {\r\n          // fallback to first branch of that state\r\n          setSelectedBranch(groupedData[urlState][0]);\r\n        }\r\n\r\n        return;\r\n      }\r\n\r\n      // ‚úÖ CASE 2: No params ‚Üí set defaults\r\n      const firstState = Object.keys(groupedData)[0];\r\n      if (firstState) {\r\n        setSelectedState(firstState);\r\n        setSelectedBranch(groupedData[firstState][0]);\r\n      }\r\n    } catch (error) {\r\n      console.error('Error fetching branches:', error);\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  };\r\n\r\n  fetchBranches();\r\n}, [urlState, urlBranchName, urlBranchId]);\r\n\r\n  const handleStateSelect = (state) => {\r\n    setSelectedState(state);\r\n    if (branchData[state] && branchData[state].length > 0) {\r\n      setSelectedBranch(branchData[state][0]);\r\n    }\r\n  };\r\n\r\n  const handleBranchSelect = (branch) => {\r\n    setSelectedBranch(branch);\r\n  };\r\n\r\n  if (loading) {\r\n    return (\r\n      <div className=\"w-full mx-auto p-8 text-center\">\r\n        <div className=\"text-lg\">Loading branches...</div>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  if (Object.keys(branchData).length === 0) {\r\n    return (\r\n      <div className=\"w-full mx-auto p-8 text-center\">\r\n        <div className=\"text-lg text-gray-500\">No branches found</div>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  return (\r\n    <div className=\"w-full mx-auto p-4 md:p-6 lg:p-8 font-sans\">\r\n      <h1 className=\"text-lg md:text-xl font-bold text-primary mb-8\">Branches</h1>\r\n\r\n      <div className=\"flex flex-col lg:flex-row gap-6\">\r\n        <div className=\"lg:w-1/4\">\r\n          <h2 className=\"text-md md:text-lg font-semibold text-gray-700 mb-4\">Select State</h2>\r\n          <div className=\"flex flex-wrap lg:flex-col text-sm gap-2\">\r\n            {Object.keys(branchData).map((state) => (\r\n              <button\r\n                key={state}\r\n                onClick={() => handleStateSelect(state)}\r\n                className={`px-4 py-3 rounded-lg text-left transition-colors ${\r\n                  selectedState === state\r\n                    ? 'bg-primary text-white font-semibold'\r\n                    : 'bg-gray-100 text-gray-700 hover:bg-gray-200'\r\n                }`}\r\n              >\r\n                {state}\r\n              </button>\r\n            ))}\r\n          </div>\r\n        </div>\r\n\r\n        <div className=\"lg:w-1/3\">\r\n          <h2 className=\"text-md md:text-lg font-semibold text-gray-700 mb-4\">\r\n            Branches in {selectedState}\r\n          </h2>\r\n          <div className=\"space-y-2 text-sm\">\r\n            {branchData[selectedState]?.map((branch) => (\r\n              <button\r\n                key={branch.id}\r\n                onClick={() => handleBranchSelect(branch)}\r\n                className={`w-full text-left px-4 py-3 rounded-lg transition-colors ${\r\n                  selectedBranch?.id === branch.id\r\n                    ? 'bg-primary/20 border-l-4 border-primary'\r\n                    : 'bg-gray-50 hover:bg-gray-100'\r\n                }`}\r\n              >\r\n                <span className=\"font-medium text-gray-800\">{branch.name}</span>\r\n              </button>\r\n            ))}\r\n          </div>\r\n        </div>\r\n\r\n        <div className=\"lg:w-2/4\">\r\n          <h2 className=\"text-md md:text-lg font-semibold text-gray-700 mb-4\">Branch Details</h2>\r\n          {selectedBranch ? (\r\n            <div className=\"bg-white p-6 rounded-xl border border-gray-300 shadow-sm\">\r\n              <h3 className=\"text-lg md:text-xl font-bold text-primary mb-4\">\r\n                {selectedBranch.name}\r\n              </h3>\r\n              \r\n              <div className=\"space-y-4\">\r\n                <div>\r\n                  <h4 className=\"font-semibold text-gray-700 mb-2\">Address</h4>\r\n                  <p className=\"text-gray-600 text-sm\">\r\n                    {selectedBranch.address},<br />\r\n                    {selectedBranch.city}, {selectedBranch.state}\r\n                  </p>\r\n                  <p className=\"text-gray-600 mt-1\">\r\n                    <span className=\"font-medium text-sm\">Pin:</span> {selectedBranch.pincode}\r\n                  </p>\r\n                </div>\r\n\r\n                <div>\r\n                  <h4 className=\"font-semibold text-gray-700 text-sm mb-2\">Contact Information</h4>\r\n                  <div className=\"space-y-2 text-sm\">\r\n                    <p className=\"text-gray-600\">\r\n                      <span className=\"font-medium\">Email:</span>{' '}\r\n                      <a\r\n                        href={`mailto:${selectedBranch.email}`}\r\n                        className=\"text-primary/50 hover:text-primary hover:underline transition-colors\"\r\n                      >\r\n                        {selectedBranch.email}\r\n                      </a>\r\n                    </p>\r\n                    <p className=\"text-gray-600\">\r\n                      <span className=\"font-medium\">Phone 1:</span>{' '}\r\n                      <a\r\n                        href={`tel:${selectedBranch.phone1}`}\r\n                        className=\"text-primary/50 hover:text-primary hover:underline transition-colors\"\r\n                      >\r\n                        {selectedBranch.phone1}\r\n                      </a>\r\n                    </p>\r\n                    {selectedBranch.phone2 && (\r\n                      <p className=\"text-gray-600\">\r\n                        <span className=\"font-medium\">Phone 2:</span>{' '}\r\n                        <a\r\n                          href={`tel:${selectedBranch.phone2}`}\r\n                          className=\"text-primary/60 hover:text-primary hover:underline transition-colors\"\r\n                        >\r\n                          {selectedBranch.phone2}\r\n                        </a>\r\n                      </p>\r\n                    )}\r\n                  </div>\r\n                </div>\r\n\r\n                {/* Map Section */}\r\n                <div className=\"mt-6 pt-6 border-t border-gray-200\">\r\n                  <div className=\"flex justify-between items-center mb-2\">\r\n                    <h4 className=\"font-semibold text-gray-700\">Location</h4>\r\n                    {selectedBranch.latitude && selectedBranch.longitude && (\r\n                      <button\r\n                        onClick={() => setUseInteractiveMap(!useInteractiveMap)}\r\n                        className=\"text-xs text-primary hover:text-primary-dark\"\r\n                      >\r\n                        {useInteractiveMap ? 'Switch to Static Map' : 'Switch to Interactive Map'}\r\n                      </button>\r\n                    )}\r\n                  </div>\r\n                  \r\n                  {selectedBranch.latitude && selectedBranch.longitude ? (\r\n                    useInteractiveMap ? (\r\n                      <BranchMap\r\n                        latitude={selectedBranch.latitude}\r\n                        longitude={selectedBranch.longitude}\r\n                        branchName={selectedBranch.name}\r\n                        address={`${selectedBranch.address}, ${selectedBranch.city}`}\r\n                      />\r\n                    ) : (\r\n                      <SimpleStaticMap\r\n                        latitude={selectedBranch.latitude}\r\n                        longitude={selectedBranch.longitude}\r\n                        branchName={selectedBranch.name}\r\n                      />\r\n                    )\r\n                  ) : (\r\n                    <div className=\"bg-gray-100 h-48 rounded-lg flex flex-col items-center justify-center\">\r\n                      <div className=\"text-gray-400 mb-2\">üìç</div>\r\n                      <p className=\"text-gray-500 text-sm\">No location coordinates available</p>\r\n                      <p className=\"text-xs text-gray-400 mt-1\">\r\n                        Latitude/Longitude not provided for this branch\r\n                      </p>\r\n                    </div>\r\n                  )}\r\n                  \r\n                  {selectedBranch.latitude && selectedBranch.longitude && (\r\n                    <div className=\"mt-2 text-xs text-gray-500 flex justify-between\">\r\n                      <span>Coordinates: {selectedBranch.latitude}, {selectedBranch.longitude}</span>\r\n                      <a\r\n                        href={`https://www.google.com/maps?q=${selectedBranch.latitude},${selectedBranch.longitude}`}\r\n                        target=\"_blank\"\r\n                        rel=\"noopener noreferrer\"\r\n                        className=\"text-primary hover:underline\"\r\n                      >\r\n                        Open in new tab ‚Üí\r\n                      </a>\r\n                    </div>\r\n                  )}\r\n                </div>\r\n              </div>\r\n            </div>\r\n          ) : (\r\n            <div className=\"bg-gray-50 p-8 rounded-xl border border-gray-300 text-center\">\r\n              <p className=\"text-gray-500\">Select a branch to view details</p>\r\n            </div>\r\n          )}\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default BranchLocator;"],"names":[],"mappings":"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"}