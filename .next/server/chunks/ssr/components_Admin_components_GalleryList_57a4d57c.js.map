{"version":3,"sources":["../../../../components/Admin/components/GalleryList.js"],"sourcesContent":["// components/Admin/components/GalleryList.js\r\n\"use client\";\r\n\r\nimport { useState, useEffect } from 'react';\r\nimport { useRouter } from 'next/navigation';\r\n\r\nexport default function GalleryList() {\r\n  const [galleries, setGalleries] = useState([]);\r\n  const [loading, setLoading] = useState(true);\r\n  const [error, setError] = useState('');\r\n  const [deletingId, setDeletingId] = useState(null);\r\n  const [confirmDelete, setConfirmDelete] = useState(null);\r\n  const router = useRouter();\r\n\r\n  useEffect(() => {\r\n    fetchGalleries();\r\n  }, []);\r\n\r\n  const fetchGalleries = async () => {\r\n    try {\r\n      const response = await fetch('/api/admin/gallery');\r\n      const data = await response.json();\r\n      \r\n      if (!response.ok) {\r\n        throw new Error(data.error || 'Failed to fetch galleries');\r\n      }\r\n      \r\n      setGalleries(data.data || []);\r\n      setError('');\r\n    } catch (err) {\r\n      console.error('Fetch error:', err);\r\n      setError(err.message);\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  };\r\n\r\n  const handleDelete = async (id) => {\r\n    setDeletingId(id);\r\n    \r\n    try {\r\n      const response = await fetch(`/api/admin/gallery/${id}`, {\r\n        method: 'DELETE',\r\n      });\r\n      \r\n      const data = await response.json();\r\n      \r\n      if (!response.ok) {\r\n        throw new Error(data.error || 'Failed to delete gallery');\r\n      }\r\n      \r\n      // Remove from local state\r\n      setGalleries(prev => prev.filter(gallery => gallery.id !== id));\r\n      setConfirmDelete(null);\r\n    } catch (err) {\r\n      console.error('Delete error:', err);\r\n      setError(err.message);\r\n    } finally {\r\n      setDeletingId(null);\r\n    }\r\n  };\r\n\r\n  const handleEdit = (id) => {\r\n    router.push(`/admin/media/gallery/edit/${id}`);\r\n  };\r\n\r\n  if (loading) return (\r\n    <div className=\"flex justify-center py-12\">\r\n      <div className=\"animate-spin rounded-full h-10 w-10 border-b-2 border-blue-600\"></div>\r\n    </div>\r\n  );\r\n  \r\n  if (error) return (\r\n    <div className=\"text-center py-12\">\r\n      <div className=\"text-red-600 mb-2\">Error loading galleries</div>\r\n      <div className=\"text-sm text-gray-600 mb-4\">{error}</div>\r\n      <button \r\n        onClick={fetchGalleries}\r\n        className=\"px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700\"\r\n      >\r\n        Try again\r\n      </button>\r\n    </div>\r\n  );\r\n\r\n  return (\r\n    <div className=\"space-y-6\">\r\n      <div className=\"flex justify-between items-center\">\r\n        <h2 className=\"text-2xl font-bold text-gray-800\">Galleries</h2>\r\n        <button\r\n          onClick={() => router.push('/admin/media/gallery/create')}\r\n          className=\"px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 flex items-center\"\r\n        >\r\n          <svg className=\"w-5 h-5 mr-2\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\r\n            <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth=\"2\" d=\"M12 4v16m8-8H4\" />\r\n          </svg>\r\n          Create Gallery\r\n        </button>\r\n      </div>\r\n      \r\n      {galleries.length === 0 ? (\r\n        <div className=\"text-center py-12 text-gray-500\">\r\n          <svg className=\"mx-auto h-16 w-16 text-gray-400 mb-4\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\r\n            <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth=\"1.5\" d=\"M4 16l4.586-4.586a2 2 0 012.828 0L16 16m-2-2l1.586-1.586a2 2 0 012.828 0L20 14m-6-6h.01M6 20h12a2 2 0 002-2V6a2 2 0 00-2-2H6a2 2 0 00-2 2v12a2 2 0 002 2z\" />\r\n          </svg>\r\n          <p className=\"text-lg\">No galleries yet</p>\r\n          <p className=\"text-sm mt-1\">Create your first gallery to get started</p>\r\n        </div>\r\n      ) : (\r\n        <div className=\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6\">\r\n          {galleries.map((gallery) => (\r\n            <div \r\n              key={gallery.id} \r\n              className=\"bg-white rounded-lg shadow-md overflow-hidden border border-gray-200 hover:shadow-lg transition-shadow duration-300\"\r\n            >\r\n              {/* Gallery Cover Image */}\r\n              <div className=\"relative h-48 w-full overflow-hidden bg-gray-100\">\r\n                {gallery.images.length > 0 ? (\r\n                  <img\r\n                    src={gallery.images[0]}\r\n                    alt={gallery.title}\r\n                    className=\"w-full h-full object-cover\"\r\n                  />\r\n                ) : (\r\n                  <div className=\"w-full h-full flex items-center justify-center text-gray-400\">\r\n                    <svg className=\"w-12 h-12\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\r\n                      <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth=\"1\" d=\"M4 16l4.586-4.586a2 2 0 012.828 0L16 16m-2-2l1.586-1.586a2 2 0 012.828 0L20 14m-6-6h.01M6 20h12a2 2 0 002-2V6a2 2 0 00-2-2H6a2 2 0 00-2 2v12a2 2 0 002 2z\" />\r\n                    </svg>\r\n                  </div>\r\n                )}\r\n                <div className=\"absolute top-2 right-2 bg-blue-600 text-white text-xs px-2 py-1 rounded\">\r\n                  {gallery.images.length} photos\r\n                </div>\r\n              </div>\r\n              \r\n              {/* Gallery Info */}\r\n              <div className=\"p-4\">\r\n                <h3 className=\"font-semibold text-lg text-gray-800 mb-2 truncate\">\r\n                  {gallery.title}\r\n                </h3>\r\n                <p className=\"text-gray-600 text-sm mb-3 line-clamp-2\">\r\n                  {gallery.description}\r\n                </p>\r\n                \r\n                <div className=\"flex items-center justify-between text-sm text-gray-500 mb-4\">\r\n                  <div className=\"flex items-center\">\r\n                    <svg className=\"w-4 h-4 mr-1\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\r\n                      <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth=\"2\" d=\"M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z\" />\r\n                    </svg>\r\n                    {new Date(gallery.createdAt).toLocaleDateString()}\r\n                  </div>\r\n                  <div className=\"text-xs bg-gray-100 px-2 py-1 rounded\">\r\n                    ID: {gallery.id}\r\n                  </div>\r\n                </div>\r\n                \r\n                {/* Action Buttons */}\r\n                <div className=\"flex space-x-2\">\r\n                  <button\r\n                    onClick={() => handleEdit(gallery.id)}\r\n                    className=\"flex-1 px-3 py-2 bg-blue-50 text-blue-700 rounded-md hover:bg-blue-100 text-sm font-medium flex items-center justify-center\"\r\n                  >\r\n                    <svg className=\"w-4 h-4 mr-2\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\r\n                      <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth=\"2\" d=\"M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z\" />\r\n                    </svg>\r\n                    Edit\r\n                  </button>\r\n                  \r\n                  <button\r\n                    onClick={() => setConfirmDelete(gallery.id)}\r\n                    disabled={deletingId === gallery.id}\r\n                    className=\"flex-1 px-3 py-2 bg-red-50 text-red-700 rounded-md hover:bg-red-100 text-sm font-medium flex items-center justify-center disabled:opacity-50\"\r\n                  >\r\n                    {deletingId === gallery.id ? (\r\n                      <>\r\n                        <svg className=\"animate-spin w-4 h-4 mr-2\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\r\n                          <circle className=\"opacity-25\" cx=\"12\" cy=\"12\" r=\"10\" stroke=\"currentColor\" strokeWidth=\"4\"/>\r\n                          <path className=\"opacity-75\" fill=\"currentColor\" d=\"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z\"/>\r\n                        </svg>\r\n                        Deleting...\r\n                      </>\r\n                    ) : (\r\n                      <>\r\n                        <svg className=\"w-4 h-4 mr-2\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\r\n                          <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth=\"2\" d=\"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16\" />\r\n                        </svg>\r\n                        Delete\r\n                      </>\r\n                    )}\r\n                  </button>\r\n                </div>\r\n              </div>\r\n            </div>\r\n          ))}\r\n        </div>\r\n      )}\r\n      \r\n      {/* Delete Confirmation Modal */}\r\n      {confirmDelete && (\r\n        <div className=\"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50\">\r\n          <div className=\"bg-white rounded-lg p-6 max-w-md w-full\">\r\n            <h3 className=\"text-lg font-semibold text-gray-800 mb-2\">Confirm Delete</h3>\r\n            <p className=\"text-gray-600 mb-6\">\r\n              Are you sure you want to delete this gallery? This action cannot be undone.\r\n            </p>\r\n            <div className=\"flex justify-end space-x-3\">\r\n              <button\r\n                onClick={() => setConfirmDelete(null)}\r\n                className=\"px-4 py-2 border border-gray-300 text-gray-700 rounded-md hover:bg-gray-50\"\r\n              >\r\n                Cancel\r\n              </button>\r\n              <button\r\n                onClick={() => handleDelete(confirmDelete)}\r\n                className=\"px-4 py-2 bg-red-600 text-white rounded-md hover:bg-red-700\"\r\n              >\r\n                Delete Gallery\r\n              </button>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      )}\r\n    </div>\r\n  );\r\n}"],"names":[],"mappings":"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"}