{"version":3,"sources":["../../../../components/Admin/components/AdminBlogForm.js"],"sourcesContent":["// components/Admin/components/AdminBlogForm.js\r\n\"use client\";\r\n\r\nimport { useState, useRef, useEffect } from 'react';\r\n\r\nexport default function AdminBlogForm({ blog = null, onSuccess, onCancel }) {\r\n  const isEditMode = !!blog;\r\n  \r\n  const [formData, setFormData] = useState({\r\n    title: blog?.title || '',\r\n    description: blog?.description || '',\r\n    imageUrl: blog?.imageUrl || ''\r\n  });\r\n  \r\n  const [uploading, setUploading] = useState(false);\r\n  const [saving, setSaving] = useState(false);\r\n  const [errors, setErrors] = useState({});\r\n  const [success, setSuccess] = useState('');\r\n  const [imagePreview, setImagePreview] = useState('');\r\n  const [showPreview, setShowPreview] = useState(false);\r\n  const fileInputRef = useRef(null);\r\n  const textareaRef = useRef(null);\r\n\r\n  // Handle image upload (same as before)\r\n  const handleImageUpload = async (e) => {\r\n    const file = e.target.files[0];\r\n    if (!file) return;\r\n\r\n    // Clear previous errors\r\n    setErrors(prev => ({ ...prev, imageUrl: '' }));\r\n\r\n    // Validate file type\r\n    if (!file.type.startsWith('image/')) {\r\n      setErrors(prev => ({ ...prev, imageUrl: 'Please select an image file (JPEG, PNG, GIF, etc.)' }));\r\n      return;\r\n    }\r\n    \r\n    // Validate file size (5MB limit)\r\n    if (file.size > 5 * 1024 * 1024) {\r\n      setErrors(prev => ({ ...prev, imageUrl: 'Image size should be less than 5MB' }));\r\n      return;\r\n    }\r\n\r\n    // Create preview\r\n    const previewUrl = URL.createObjectURL(file);\r\n    setImagePreview(previewUrl);\r\n\r\n    setUploading(true);\r\n    const data = new FormData();\r\n    data.append(\"file\", file);\r\n    data.append(\"upload_preset\", process.env.NEXT_PUBLIC_CLOUDINARY_UPLOAD_PRESET);\r\n\r\n    try {\r\n      const cloudName = 'ddsim4ixm'; // Your cloud name\r\n      const res = await fetch(\r\n        `https://api.cloudinary.com/v1_1/${process.env.NEXT_PUBLIC_CLOUDINARY_CLOUD_NAME}/image/upload`,\r\n        { \r\n          method: \"POST\", \r\n          body: data \r\n        }\r\n      );\r\n      \r\n      if (!res.ok) {\r\n        throw new Error(`Upload failed with status: ${res.status}`);\r\n      }\r\n      \r\n      const result = await res.json();\r\n      \r\n      if (!result.secure_url) {\r\n        throw new Error('No secure URL returned from Cloudinary');\r\n      }\r\n      \r\n      setFormData({ \r\n        ...formData, \r\n        imageUrl: result.secure_url\r\n      });\r\n      \r\n      setSuccess('âœ“ Image uploaded successfully');\r\n      setTimeout(() => setSuccess(''), 2000);\r\n      \r\n    } catch (err) {\r\n      console.error(\"Upload failed:\", err);\r\n      setErrors(prev => ({ \r\n        ...prev, \r\n        imageUrl: err.message || 'Image upload failed. Please try again.' \r\n      }));\r\n      setImagePreview('');\r\n      setFormData(prev => ({ ...prev, imageUrl: '' }));\r\n    } finally {\r\n      setUploading(false);\r\n    }\r\n  };\r\n\r\n  // Formatting helper functions for the textarea\r\n  const insertFormatting = (format) => {\r\n    if (!textareaRef.current) return;\r\n    \r\n    const textarea = textareaRef.current;\r\n    const start = textarea.selectionStart;\r\n    const end = textarea.selectionEnd;\r\n    const text = textarea.value;\r\n    const selectedText = text.substring(start, end);\r\n    \r\n    let newText;\r\n    let newCursorPos;\r\n    \r\n    switch(format) {\r\n      case 'bold':\r\n        newText = text.substring(0, start) + '**' + selectedText + '**' + text.substring(end);\r\n        newCursorPos = end + 4;\r\n        break;\r\n      case 'italic':\r\n        newText = text.substring(0, start) + '*' + selectedText + '*' + text.substring(end);\r\n        newCursorPos = end + 2;\r\n        break;\r\n      case 'bullet':\r\n        if (selectedText.includes('\\n')) {\r\n          // Add bullet points to each line\r\n          const lines = selectedText.split('\\n');\r\n          const bulletedLines = lines.map(line => line.trim() ? `â€¢ ${line}` : '').join('\\n');\r\n          newText = text.substring(0, start) + bulletedLines + text.substring(end);\r\n          newCursorPos = end + (bulletedLines.length - selectedText.length);\r\n        } else {\r\n          newText = text.substring(0, start) + 'â€¢ ' + selectedText + text.substring(end);\r\n          newCursorPos = end + 2;\r\n        }\r\n        break;\r\n      case 'number':\r\n        if (selectedText.includes('\\n')) {\r\n          const lines = selectedText.split('\\n');\r\n          const numberedLines = lines.map((line, index) => line.trim() ? `${index + 1}. ${line}` : '').join('\\n');\r\n          newText = text.substring(0, start) + numberedLines + text.substring(end);\r\n          newCursorPos = end + (numberedLines.length - selectedText.length);\r\n        } else {\r\n          newText = text.substring(0, start) + '1. ' + selectedText + text.substring(end);\r\n          newCursorPos = end + 3;\r\n        }\r\n        break;\r\n      case 'link':\r\n        const url = prompt('Enter URL:');\r\n        if (url) {\r\n          newText = text.substring(0, start) + `[${selectedText || 'link'}](${url})` + text.substring(end);\r\n          newCursorPos = end + (selectedText ? 0 : 4) + url.length + 3;\r\n        }\r\n        return;\r\n      default:\r\n        return;\r\n    }\r\n    \r\n    setFormData(prev => ({ ...prev, description: newText }));\r\n    \r\n    // Restore cursor position after state update\r\n    setTimeout(() => {\r\n      if (textareaRef.current) {\r\n        textareaRef.current.focus();\r\n        textareaRef.current.setSelectionRange(newCursorPos, newCursorPos);\r\n      }\r\n    }, 0);\r\n  };\r\n\r\n  const validateForm = () => {\r\n    const newErrors = {};\r\n    \r\n    if (!formData.title.trim()) {\r\n      newErrors.title = 'Title is required';\r\n    } else if (formData.title.length < 3) {\r\n      newErrors.title = 'Title must be at least 3 characters';\r\n    }\r\n    \r\n    if (!formData.description.trim()) {\r\n      newErrors.description = 'Description is required';\r\n    } else if (formData.description.length < 50) {\r\n      newErrors.description = 'Description must be at least 50 characters';\r\n    }\r\n    \r\n    if (!formData.imageUrl) {\r\n      newErrors.imageUrl = 'Please upload an image';\r\n    }\r\n    \r\n    setErrors(newErrors);\r\n    return Object.keys(newErrors).length === 0;\r\n  };\r\n\r\n  const handleSubmit = async (e) => {\r\n    e.preventDefault();\r\n    \r\n    if (!validateForm()) {\r\n      return;\r\n    }\r\n    \r\n    setSaving(true);\r\n    \r\n    try {\r\n      const url = isEditMode ? `/api/admin/blog/${blog.id}` : '/api/admin/blog';\r\n      const method = isEditMode ? 'PUT' : 'POST';\r\n      \r\n      const response = await fetch(url, {\r\n        method,\r\n        headers: {\r\n          'Content-Type': 'application/json',\r\n        },\r\n        body: JSON.stringify(formData),\r\n      });\r\n\r\n      let data;\r\n      try {\r\n        data = await response.json();\r\n      } catch (jsonError) {\r\n        console.error('JSON parse error:', jsonError);\r\n        throw new Error('Server returned invalid response. Please try again.');\r\n      }\r\n      \r\n      if (!response.ok) {\r\n        throw new Error(data.error || `Failed to ${isEditMode ? 'update' : 'save'} blog (Status: ${response.status})`);\r\n      }\r\n      \r\n      // Success\r\n      const successMessage = isEditMode ? 'Blog updated successfully!' : 'Blog created successfully!';\r\n      setSuccess(successMessage);\r\n      \r\n      // Reset form if not in edit mode\r\n      if (!isEditMode) {\r\n        setFormData({\r\n          title: '',\r\n          description: '',\r\n          imageUrl: ''\r\n        });\r\n        setImagePreview('');\r\n        if (fileInputRef.current) {\r\n          fileInputRef.current.value = '';\r\n        }\r\n      }\r\n      \r\n      // Call success callback if provided\r\n      if (onSuccess) {\r\n        setTimeout(() => {\r\n          onSuccess(data.data);\r\n        }, 1000);\r\n      }\r\n      \r\n      // Clear success message after 3 seconds\r\n      setTimeout(() => {\r\n        setSuccess('');\r\n      }, 3000);\r\n      \r\n    } catch (err) {\r\n      console.error('Save failed:', err);\r\n      setErrors(prev => ({ \r\n        ...prev, \r\n        form: err.message || `Failed to ${isEditMode ? 'update' : 'save'} blog. Please try again.` \r\n      }));\r\n    } finally {\r\n      setSaving(false);\r\n    }\r\n  };\r\n\r\n  const handleChange = (e) => {\r\n    const { name, value } = e.target;\r\n    setFormData(prev => ({ ...prev, [name]: value }));\r\n    \r\n    // Clear error for this field when user starts typing\r\n    if (errors[name]) {\r\n      setErrors(prev => ({ ...prev, [name]: '' }));\r\n    }\r\n  };\r\n\r\n  const handleRemoveImage = () => {\r\n    setFormData(prev => ({ ...prev, imageUrl: '' }));\r\n    setImagePreview('');\r\n    if (fileInputRef.current) {\r\n      fileInputRef.current.value = '';\r\n    }\r\n    setErrors(prev => ({ ...prev, imageUrl: '' }));\r\n  };\r\n\r\n  // Preview rendering function\r\n  const renderPreview = () => {\r\n    const formatText = (text) => {\r\n      // Convert markdown-like formatting to HTML\r\n      let formatted = text\r\n        // Convert line breaks to <br> for preview\r\n        .replace(/\\n/g, '<br>')\r\n        // Convert paragraphs (double line breaks)\r\n        .replace(/<br><br>/g, '</p><p>')\r\n        // Convert bold **text** to <strong>\r\n        .replace(/\\*\\*(.*?)\\*\\*/g, '<strong>$1</strong>')\r\n        // Convert italic *text* to <em>\r\n        .replace(/\\*(.*?)\\*/g, '<em>$1</em>')\r\n        // Convert bullet points â€¢ to list items\r\n        .replace(/â€¢\\s*(.*?)(?=<br>|$)/g, '<li>$1</li>')\r\n        // Convert numbered lists 1. to list items\r\n        .replace(/(\\d+)\\.\\s*(.*?)(?=<br>|$)/g, '<li>$2</li>')\r\n        // Convert links [text](url) to <a>\r\n        .replace(/\\[(.*?)\\]\\((.*?)\\)/g, '<a href=\"$2\" class=\"text-blue-600 hover:underline\">$1</a>');\r\n\r\n      // Wrap in paragraph tags\r\n      return `<p>${formatted}</p>`;\r\n    };\r\n\r\n    return (\r\n      <div className=\"prose prose-lg max-w-none\">\r\n        <div \r\n          className=\"text-gray-700 whitespace-pre-wrap\"\r\n          dangerouslySetInnerHTML={{ __html: formatText(formData.description) }}\r\n        />\r\n      </div>\r\n    );\r\n  };\r\n\r\n  return (\r\n    <div className=\"max-w-4xl mx-auto p-6 bg-white rounded-lg shadow-md\">\r\n      <h2 className=\"text-2xl font-bold mb-6 text-gray-800\">\r\n        {isEditMode ? 'Edit Blog Post' : 'Create New Blog Post'}\r\n      </h2>\r\n      \r\n      {success && (\r\n        <div className=\"mb-4 p-3 bg-green-100 text-green-700 rounded-md\">\r\n          {success}\r\n        </div>\r\n      )}\r\n      \r\n      {errors.form && (\r\n        <div className=\"mb-4 p-3 bg-red-100 text-red-700 rounded-md\">\r\n          {errors.form}\r\n        </div>\r\n      )}\r\n      \r\n      <form onSubmit={handleSubmit} className=\"space-y-6\">\r\n        {/* Title Field */}\r\n        <div>\r\n          <label className=\"block text-sm font-medium text-gray-700 mb-1\">\r\n            Blog Title *\r\n          </label>\r\n          <input\r\n            type=\"text\"\r\n            name=\"title\"\r\n            value={formData.title}\r\n            onChange={handleChange}\r\n            className={`w-full px-3 py-2 border rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 ${\r\n              errors.title ? 'border-red-500' : 'border-gray-300'\r\n            }`}\r\n            placeholder=\"Enter blog title\"\r\n          />\r\n          {errors.title && (\r\n            <p className=\"mt-1 text-sm text-red-600\">{errors.title}</p>\r\n          )}\r\n        </div>\r\n        \r\n        {/* Image Upload Section */}\r\n        <div>\r\n          <label className=\"block text-sm font-medium text-gray-700 mb-1\">\r\n            Featured Image *\r\n          </label>\r\n          \r\n          <div className=\"space-y-3\">\r\n            {/* Image Preview */}\r\n            {(imagePreview || formData.imageUrl) ? (\r\n              <div className=\"relative\">\r\n                <div className=\"w-full max-w-md border-2 border-dashed border-gray-300 rounded-lg overflow-hidden\">\r\n                  <img\r\n                    src={imagePreview || formData.imageUrl}\r\n                    alt=\"Preview\"\r\n                    className=\"w-full h-64 object-contain\"\r\n                  />\r\n                </div>\r\n                <button\r\n                  type=\"button\"\r\n                  onClick={handleRemoveImage}\r\n                  className=\"absolute top-2 right-2 bg-red-500 text-white p-1 rounded-full hover:bg-red-600\"\r\n                >\r\n                  <svg className=\"w-5 h-5\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\r\n                    <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth=\"2\" d=\"M6 18L18 6M6 6l12 12\" />\r\n                  </svg>\r\n                </button>\r\n              </div>\r\n            ) : (\r\n              <div className=\"border-2 border-dashed border-gray-300 rounded-lg p-8 text-center\">\r\n                <svg className=\"mx-auto h-12 w-12 text-gray-400\" stroke=\"currentColor\" fill=\"none\" viewBox=\"0 0 48 48\">\r\n                  <path d=\"M28 8H12a4 4 0 00-4 4v20m32-12v8m0 0v8a4 4 0 01-4 4H12a4 4 0 01-4-4v-4m32-4l-3.172-3.172a4 4 0 00-5.656 0L28 28M8 32l9.172-9.172a4 4 0 015.656 0L28 28m0 0l4 4m4-24h8m-4-4v8m-12 4h.02\" strokeWidth=\"2\" strokeLinecap=\"round\" strokeLinejoin=\"round\" />\r\n                </svg>\r\n                <p className=\"mt-2 text-sm text-gray-600\">\r\n                  Upload a featured image\r\n                </p>\r\n                <p className=\"text-xs text-gray-500\">\r\n                  PNG, JPG, GIF up to 5MB\r\n                </p>\r\n              </div>\r\n            )}\r\n            \r\n            {/* Upload Button */}\r\n            <div>\r\n              <label className=\"block\">\r\n                <span className=\"sr-only\">Choose image</span>\r\n                <input\r\n                  ref={fileInputRef}\r\n                  type=\"file\"\r\n                  accept=\"image/*\"\r\n                  onChange={handleImageUpload}\r\n                  className=\"block w-full text-sm text-gray-500\r\n                    file:mr-4 file:py-2 file:px-4\r\n                    file:rounded-md file:border-0\r\n                    file:text-sm file:font-semibold\r\n                    file:bg-blue-50 file:text-blue-700\r\n                    hover:file:bg-blue-100\r\n                    cursor-pointer\"\r\n                />\r\n              </label>\r\n              {uploading && (\r\n                <div className=\"mt-2\">\r\n                  <div className=\"w-full bg-gray-200 rounded-full h-2.5\">\r\n                    <div className=\"bg-blue-600 h-2.5 rounded-full animate-pulse w-1/2\"></div>\r\n                  </div>\r\n                  <p className=\"mt-1 text-sm text-blue-600\">Uploading image...</p>\r\n                </div>\r\n              )}\r\n              {errors.imageUrl && (\r\n                <p className=\"mt-2 text-sm text-red-600\">{errors.imageUrl}</p>\r\n              )}\r\n            </div>\r\n          </div>\r\n        </div>\r\n        \r\n        {/* Description Field with Formatting Tools */}\r\n        <div>\r\n          <div className=\"flex justify-between items-center mb-1\">\r\n            <label className=\"block text-sm font-medium text-gray-700\">\r\n              Blog Content *\r\n            </label>\r\n            <button\r\n              type=\"button\"\r\n              onClick={() => setShowPreview(!showPreview)}\r\n              className=\"text-sm text-blue-600 hover:text-blue-800\"\r\n            >\r\n              {showPreview ? 'Show Editor' : 'Show Preview'}\r\n            </button>\r\n          </div>\r\n          \r\n          {/* Formatting Toolbar */}\r\n          <div className=\"flex flex-wrap gap-2 mb-2 p-2 bg-gray-50 rounded-md border border-gray-200\">\r\n            <button\r\n              type=\"button\"\r\n              onClick={() => insertFormatting('bold')}\r\n              className=\"px-3 py-1.5 text-sm font-bold bg-white border border-gray-300 rounded hover:bg-gray-50\"\r\n              title=\"Bold (Ctrl+B)\"\r\n            >\r\n              <strong>B</strong>\r\n            </button>\r\n            <button\r\n              type=\"button\"\r\n              onClick={() => insertFormatting('italic')}\r\n              className=\"px-3 py-1.5 text-sm italic bg-white border border-gray-300 rounded hover:bg-gray-50\"\r\n              title=\"Italic (Ctrl+I)\"\r\n            >\r\n              <em>I</em>\r\n            </button>\r\n            <button\r\n              type=\"button\"\r\n              onClick={() => insertFormatting('bullet')}\r\n              className=\"px-3 py-1.5 text-sm bg-white border border-gray-300 rounded hover:bg-gray-50 flex items-center\"\r\n              title=\"Bullet List\"\r\n            >\r\n              <span className=\"mr-1\">â€¢</span> List\r\n            </button>\r\n            <button\r\n              type=\"button\"\r\n              onClick={() => insertFormatting('number')}\r\n              className=\"px-3 py-1.5 text-sm bg-white border border-gray-300 rounded hover:bg-gray-50\"\r\n              title=\"Numbered List\"\r\n            >\r\n              1. List\r\n            </button>\r\n            <button\r\n              type=\"button\"\r\n              onClick={() => insertFormatting('link')}\r\n              className=\"px-3 py-1.5 text-sm bg-white border border-gray-300 rounded hover:bg-gray-50\"\r\n              title=\"Insert Link\"\r\n            >\r\n              ðŸ”— Link\r\n            </button>\r\n            <div className=\"text-xs text-gray-500 ml-auto flex items-center\">\r\n              <span>Press Enter for new paragraph, Shift+Enter for line break</span>\r\n            </div>\r\n          </div>\r\n          \r\n          {/* Formatting Help */}\r\n          <div className=\"text-xs text-gray-500 mb-2 p-2 bg-blue-50 rounded\">\r\n            <div className=\"grid grid-cols-2 gap-2\">\r\n              <div><strong>Bold:</strong> **text**</div>\r\n              <div><em>Italic:</em> *text*</div>\r\n              <div>Bullet: â€¢ item</div>\r\n              <div>Numbered: 1. item</div>\r\n              <div>Link: [text](url)</div>\r\n              <div>Line break: Press Enter</div>\r\n            </div>\r\n          </div>\r\n          \r\n          {showPreview ? (\r\n            // Preview Panel\r\n            <div className={`border rounded-md p-4 min-h-[200px] bg-gray-50 ${\r\n              errors.description ? 'border-red-500' : 'border-gray-300'\r\n            }`}>\r\n              {formData.description ? (\r\n                renderPreview()\r\n              ) : (\r\n                <p className=\"text-gray-400 italic\">Preview will appear here...</p>\r\n              )}\r\n            </div>\r\n          ) : (\r\n            // Text Editor\r\n            <textarea\r\n              ref={textareaRef}\r\n              name=\"description\"\r\n              value={formData.description}\r\n              onChange={handleChange}\r\n              rows=\"15\"\r\n              className={`w-full px-3 py-2 border rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 font-mono text-sm ${\r\n                errors.description ? 'border-red-500' : 'border-gray-300'\r\n              }`}\r\n              placeholder=\"Write your blog content here...\r\n              \r\nUse **bold** for important text\r\nUse *italic* for emphasis\r\nUse â€¢ for bullet points\r\nUse 1. for numbered lists\r\nPress Enter for new paragraphs\r\n              \r\nExample:\r\n**Introduction**\r\nThis is a sample blog post.\r\n\r\nâ€¢ First point\r\nâ€¢ Second point\r\nâ€¢ Third point\r\n\r\n1. Step one\r\n2. Step two\r\n3. Step three\"\r\n            />\r\n          )}\r\n          \r\n          {errors.description && (\r\n            <p className=\"mt-1 text-sm text-red-600\">{errors.description}</p>\r\n          )}\r\n          <div className=\"mt-1 flex justify-between text-sm\">\r\n            <span className={`${formData.description.length < 50 ? 'text-red-500' : 'text-gray-500'}`}>\r\n              Minimum 50 characters required\r\n            </span>\r\n            <span className={`${\r\n              formData.description.length >= 50 ? 'text-green-500' : 'text-gray-500'\r\n            }`}>\r\n              {formData.description.length} characters\r\n            </span>\r\n          </div>\r\n        </div>\r\n        \r\n        {/* Action Buttons */}\r\n        <div className=\"pt-4 flex justify-end space-x-3\">\r\n          {onCancel && (\r\n            <button\r\n              type=\"button\"\r\n              onClick={onCancel}\r\n              disabled={uploading || saving}\r\n              className=\"px-5 py-2.5 border border-gray-300 text-gray-700 rounded-md hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-gray-500 focus:ring-offset-2 disabled:opacity-50 disabled:cursor-not-allowed\"\r\n            >\r\n              Cancel\r\n            </button>\r\n          )}\r\n          \r\n          <button\r\n            type=\"submit\"\r\n            disabled={uploading || saving}\r\n            className={`px-5 py-2.5 rounded-md font-medium text-white flex items-center ${\r\n              uploading || saving\r\n                ? 'bg-gray-400 cursor-not-allowed'\r\n                : 'bg-blue-600 hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2'\r\n            }`}\r\n          >\r\n            {saving ? (\r\n              <>\r\n                <svg className=\"animate-spin -ml-1 mr-3 h-5 w-5 text-white\" fill=\"none\" viewBox=\"0 0 24 24\">\r\n                  <circle className=\"opacity-25\" cx=\"12\" cy=\"12\" r=\"10\" stroke=\"currentColor\" strokeWidth=\"4\"/>\r\n                  <path className=\"opacity-75\" fill=\"currentColor\" d=\"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z\"/>\r\n                </svg>\r\n                {isEditMode ? 'Updating...' : 'Publishing...'}\r\n              </>\r\n            ) : uploading ? (\r\n              'Uploading Image...'\r\n            ) : (\r\n              isEditMode ? 'Update Blog Post' : 'Publish Blog Post'\r\n            )}\r\n          </button>\r\n        </div>\r\n      </form>\r\n    </div>\r\n  );\r\n}"],"names":[],"mappings":"wDAGA,EAAA,EAAA,CAAA,CAAA,OAEe,SAAS,EAAc,MAAE,EAAO,IAAI,CAAE,WAAS,UAAE,CAAQ,CAAE,EACxE,MAAM,EAAa,CAAC,CAAC,EAEf,CAAC,EAAU,EAAY,CAAG,CAAA,EAAA,EAAA,QAAA,AAAQ,EAAC,CACvC,MAAO,GAAM,OAAS,GACtB,YAAa,GAAM,aAAe,GAClC,SAAU,GAAM,UAAY,EAC9B,GAEM,CAAC,EAAW,EAAa,CAAG,CAAA,EAAA,EAAA,QAAA,AAAQ,GAAC,GACrC,CAAC,EAAQ,EAAU,CAAG,CAAA,EAAA,EAAA,QAAA,AAAQ,GAAC,GAC/B,CAAC,EAAQ,EAAU,CAAG,CAAA,EAAA,EAAA,QAAA,AAAQ,EAAC,CAAC,GAChC,CAAC,EAAS,EAAW,CAAG,CAAA,EAAA,EAAA,QAAA,AAAQ,EAAC,IACjC,CAAC,EAAc,EAAgB,CAAG,CAAA,EAAA,EAAA,QAAA,AAAQ,EAAC,IAC3C,CAAC,EAAa,EAAe,CAAG,CAAA,EAAA,EAAA,QAAA,AAAQ,EAAC,IACzC,EAAe,CAAA,EAAA,EAAA,MAAA,AAAM,EAAC,MACtB,EAAc,CAAA,EAAA,EAAA,MAAA,AAAM,EAAC,MAGrB,EAAoB,MAAO,IAC/B,IAAM,EAAO,EAAE,MAAM,CAAC,KAAK,CAAC,EAAE,CAC9B,GAAI,CAAC,EAAM,OAMX,GAHA,EAAU,IAAS,CAAE,EAAH,CAAM,CAAI,CAAE,SAAU,GAAG,CAAC,EAGxC,CAAC,EAAK,IAAI,CAAC,UAAU,CAAC,UAAW,YACnC,EAAU,GAAS,EAAE,EAAH,CAAM,CAAI,CAAE,SAAU,qDAAqD,CAAC,EAKhG,GAAI,EAAK,IAAI,CAAG,IAAI,IAAa,GAAN,SACzB,EAAU,IAAS,CAAE,EAAH,CAAM,CAAI,CAAE,SAAU,qCAAqC,CAAC,EAMhF,EADmB,IAAI,UACP,KADsB,CAAC,IAGvC,GAAa,GACb,IAAM,EAAO,IAAI,SACjB,EAAK,MAAM,CAAC,OAAQ,GACpB,EAAK,MAAM,CAAC,gBAAA,gBAEZ,GAAI,CAEF,IAAM,EAAM,MAAM,MAChB,CAAC,gCAAgC,wBACjC,CACE,OAAQ,OACR,KAAM,CACR,GAGF,AAPmF,GAO/E,CAAC,EAAI,EAAE,CACT,CADW,GAPmF,CAAC,CAQzF,AAAI,MAAM,CAAC,2BAA2B,EAAE,EAAI,MAAM,CAAA,CAAE,EAG5D,IAAM,EAAS,MAAM,EAAI,IAAI,GAE7B,GAAI,CAAC,EAAO,UAAU,CACpB,CADsB,KAChB,AAAI,MAAM,0CAGlB,EAAY,CACV,GAAG,CAAQ,CACX,SAAU,EAAO,UACnB,AAD6B,GAG7B,EAAW,iCACX,WAAW,IAAM,EAAW,IAAK,IAEnC,CAAE,MAAO,EAAK,CACZ,QAAQ,KAAK,CAAC,iBAAkB,GAChC,EAAU,IAAS,CACjB,EADgB,CACb,CAAI,CACP,SAAU,EAAI,OAAO,EAAI,yCAC3B,CAAC,EACD,EAAgB,IAChB,EAAY,IAAS,CAAE,EAAH,CAAM,CAAI,CAAE,SAAU,GAAG,CAAC,CAChD,QAAU,CACR,EAAa,GACf,CACF,EAGM,EAAmB,AAAC,QASpB,EACA,EATJ,GAAI,CAAC,EAAY,OAAO,CAAE,OAE1B,IAAM,EAAW,EAAY,OAAO,CAC9B,EAAQ,EAAS,cAAc,CAC/B,EAAM,EAAS,YAAY,CAC3B,EAAO,EAAS,KAAK,CACrB,EAAe,EAAK,SAAS,CAAC,EAAO,GAK3C,OAAO,GACL,IAAK,OACH,EAAU,EAAK,SAAS,CAAC,EAAG,GAAS,KAAO,EAAe,KAAO,EAAK,SAAS,CAAC,GACjF,EAAe,EAAM,EACrB,KACF,KAAK,SACH,EAAU,EAAK,SAAS,CAAC,EAAG,GAAS,IAAM,EAAe,IAAM,EAAK,SAAS,CAAC,GAC/E,EAAe,EAAM,EACrB,KACF,KAAK,SACH,GAAI,EAAa,QAAQ,CAAC,MAAO,CAG/B,IAAM,EAAgB,AADR,EAAa,KAAK,CAAC,MACL,GAAG,CAAC,GAAQ,EAAK,IAAI,GAAK,CAAC,EAAE,EAAE,EAAA,CAAM,CAAG,IAAI,IAAI,CAAC,MAC7E,EAAU,EAAK,SAAS,CAAC,EAAG,GAAS,EAAgB,EAAK,SAAS,CAAC,GACpE,EAAe,GAAO,EAAc,CAAf,KAAqB,CAAG,EAAa,MAAA,AAAM,CAClE,MACE,CADK,CACK,EAAK,SAAS,CAAC,EAAG,GAAS,KAAO,EAAe,EAAK,SAAS,CAAC,GAC1E,EAAe,EAAM,EAEvB,KACF,KAAK,SACH,GAAI,EAAa,QAAQ,CAAC,MAAO,CAE/B,IAAM,EADQ,AACQ,EADK,KAAK,CAAC,MACL,GAAG,CAAC,CAAC,EAAM,IAAU,EAAK,IAAI,GAAK,CAAA,EAAG,EAAQ,EAAE,EAAE,EAAE,EAAA,CAAM,CAAG,IAAI,IAAI,CAAC,MAClG,EAAU,EAAK,SAAS,CAAC,EAAG,GAAS,EAAgB,EAAK,SAAS,CAAC,GACpE,EAAe,GAAO,EAAc,CAAf,KAAqB,CAAG,EAAa,MAAA,AAAM,CAClE,MACE,CADK,CACK,EAAK,SAAS,CAAC,EAAG,GAAS,MAAQ,EAAe,EAAK,SAAS,CAAC,GAC3E,EAAe,EAAM,EAEvB,KACF,KAAK,OACH,IAAM,EAAM,OAAO,cACf,IACF,CADO,CACG,EAAK,SAAS,CAAC,EAAG,GAAS,CAAC,CAAC,EAAE,GAAgB,OAAO,EAAE,EAAE,EAAI,CAAC,CAAC,CAAG,EAAK,SAAS,CAAC,GAC5F,EAAe,EAAO,AAAmB,CAAC,GAArB,CAAyB,EAAI,MAAM,CAAG,CAAtB,EAEvC,MACF,SACE,MACJ,CAEA,EAAY,IAAS,CAAE,EAAH,CAAM,CAAI,CAAE,YAAa,EAAQ,CAAC,EAGtD,WAAW,KACL,EAAY,OAAO,EAAE,CACvB,EAAY,OAAO,CAAC,KAAK,GACzB,EAAY,OAAO,CAAC,iBAAiB,CAAC,EAAc,GAExD,EAAG,EACL,EAyBM,EAAe,MAAO,UAG1B,GAFA,CAEI,CAFF,AAEG,cAFW,EAEK,CAzBf,EAAY,CAAC,EAEd,EAAS,KAAK,CAAC,IAAI,GAEb,CAFiB,CAER,KAAK,CAAC,MAAM,CAAG,GAAG,CACpC,EAAU,KAAK,CAAG,qCAAA,EAFlB,EAAU,KAAK,CAAG,oBAKf,EAAS,WAAW,CAAC,IAAI,GAEnB,CAFuB,CAEd,WAAW,CAAC,MAAM,CAAG,IAAI,CAC3C,EAAU,WAAW,CAAG,4CAAA,EAFxB,EAAU,WAAW,CAAG,0BAKtB,AAAC,EAAS,QAAQ,EAAE,CACtB,EAAU,QAAQ,CAAG,wBAAA,EAGvB,EAAU,GAC+B,IAAlC,OAAO,IAAI,CAAC,GAAW,MAAM,EAUpC,GAAU,GAEV,GAAI,CACF,IAWI,EAXE,EAAM,EAAa,CAAC,gBAAgB,EAAE,EAAK,EAAE,CAAA,CAAE,CAAG,kBAGlD,EAAW,MAAM,MAAM,EAAK,CAChC,OAHa,EAAa,MAAQ,OAIlC,QAAS,CACP,eAAgB,kBAClB,EACA,KAAM,KAAK,SAAS,CAAC,EACvB,GAGA,GAAI,CACF,EAAO,MAAM,EAAS,IAAI,EAC5B,CAAE,MAAO,EAAW,CAElB,MADA,QAAQ,KAAK,CAAC,oBAAqB,GAC7B,AAAI,MAAM,sDAClB,CAEA,GAAI,CAAC,EAAS,EAAE,CACd,CADgB,KACV,AAAI,MAAM,EAAK,KAAK,EAAI,CAAC,UAAU,EAAE,EAAa,SAAW,OAAO,eAAe,EAAE,EAAS,MAAM,CAAC,CAAC,CAAC,EAK/G,EADuB,EAAa,OACzB,sBADwD,8BAI/D,CAAC,IACH,EAAY,CACV,KAFa,CAEN,GACP,YAAa,GACb,SAAU,EACZ,GACA,EAAgB,IACZ,EAAa,OAAO,EAAE,CACxB,EAAa,OAAO,CAAC,KAAK,CAAG,EAAA,GAK7B,GACF,QADa,GACF,KACT,EAAU,EAAK,IAAI,CACrB,EAAG,KAIL,WAAW,KACT,EAAW,GACb,EAAG,IAEL,CAAE,MAAO,EAAK,CACZ,QAAQ,KAAK,CAAC,eAAgB,GAC9B,EAAU,IAAS,CACjB,EADgB,CACb,CAAI,CACP,KAAM,EAAI,OAAO,EAAI,CAAC,UAAU,EAAE,EAAa,SAAW,OAAO,wBAAwB,CAC3F,AAD4F,CAC3F,EACH,QAAU,CACR,GAAU,EACZ,EACF,EAEM,EAAe,AAAC,IACpB,GAAM,MAAE,CAAI,OAAE,CAAK,CAAE,CAAG,EAAE,MAAM,CAChC,EAAY,IAAS,CAAE,EAAH,CAAM,CAAI,CAAE,CAAC,EAAK,CAAE,EAAM,CAAC,EAG3C,CAAM,CAAC,EAAK,EAAE,AAChB,EAAU,IAAS,CAAE,EAAH,CAAM,CAAI,CAAE,CAAC,EAAK,CAAE,GAAG,CAAC,CAE9C,EA6CA,MACE,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,CAAI,UAAU,gEACb,CAAA,EAAA,EAAA,GAAA,EAAC,KAAA,CAAG,UAAU,iDACX,EAAa,iBAAmB,yBAGlC,GACC,CAAA,EAAA,EAAA,GAAA,EAAC,MAAA,CAAI,UAAU,2DACZ,IAIJ,EAAO,IAAI,EACV,CAAA,EAAA,EAAA,GAAA,EAAC,MAAA,CAAI,UAAU,uDACZ,EAAO,IAAI,GAIhB,CAAA,EAAA,EAAA,IAAA,EAAC,OAAA,CAAK,SAAU,EAAc,UAAU,sBAEtC,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,WACC,CAAA,EAAA,EAAA,GAAA,EAAC,QAAA,CAAM,UAAU,wDAA+C,iBAGhE,CAAA,EAAA,EAAA,GAAA,EAAC,QAAA,CACC,KAAK,OACL,KAAK,QACL,MAAO,EAAS,KAAK,CACrB,SAAU,EACV,UAAW,CAAC,uFAAuF,EACjG,EAAO,KAAK,CAAG,iBAAmB,kBAAA,CAClC,CACF,YAAY,qBAEb,EAAO,KAAK,EACX,CAAA,EAAA,EAAA,GAAA,EAAC,IAAA,CAAE,UAAU,qCAA6B,EAAO,KAAK,MAK1D,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,WACC,CAAA,EAAA,EAAA,GAAA,EAAC,QAAA,CAAM,UAAU,wDAA+C,qBAIhE,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,CAAI,UAAU,sBAEX,GAAgB,EAAS,QAAQ,CACjC,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,CAAI,UAAU,qBACb,CAAA,EAAA,EAAA,GAAA,EAAC,MAAA,CAAI,UAAU,6FACb,CAAA,EAAA,EAAA,GAAA,EAAC,MAAA,CACC,IAAK,GAAgB,EAAS,QAAQ,CACtC,IAAI,UACJ,UAAU,iCAGd,CAAA,EAAA,EAAA,GAAA,EAAC,SAAA,CACC,KAAK,SACL,QArGU,CAqGD,IApGvB,EAAY,IAAS,CAAE,EAAH,CAAM,CAAI,CAAE,SAAU,GAAG,CAAC,EAC9C,EAAgB,IACZ,EAAa,OAAO,EAAE,CACxB,EAAa,OAAO,CAAC,KAAK,CAAG,EAAA,EAE/B,EAAU,GAAS,EAAE,EAAH,CAAM,CAAI,CAAE,SAAU,GAAG,CAAC,CAC9C,EA+FgB,UAAU,0FAEV,CAAA,EAAA,EAAA,GAAA,EAAC,MAAA,CAAI,UAAU,UAAU,KAAK,OAAO,OAAO,eAAe,QAAQ,qBACjE,CAAA,EAAA,EAAA,GAAA,EAAC,OAAA,CAAK,cAAc,QAAQ,eAAe,QAAQ,YAAY,IAAI,EAAE,gCAK3E,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,CAAI,UAAU,8EACb,CAAA,EAAA,EAAA,GAAA,EAAC,MAAA,CAAI,UAAU,kCAAkC,OAAO,eAAe,KAAK,OAAO,QAAQ,qBACzF,CAAA,EAAA,EAAA,GAAA,EAAC,OAAA,CAAK,EAAE,yLAAyL,YAAY,IAAI,cAAc,QAAQ,eAAe,YAExP,CAAA,EAAA,EAAA,GAAA,EAAC,IAAA,CAAE,UAAU,sCAA6B,4BAG1C,CAAA,EAAA,EAAA,GAAA,EAAC,IAAA,CAAE,UAAU,iCAAwB,+BAOzC,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,WACC,CAAA,EAAA,EAAA,IAAA,EAAC,QAAA,CAAM,UAAU,kBACf,CAAA,EAAA,EAAA,GAAA,EAAC,OAAA,CAAK,UAAU,mBAAU,iBAC1B,CAAA,EAAA,EAAA,GAAA,EAAC,QAAA,CACC,IAAK,EACL,KAAK,OACL,OAAO,UACP,SAAU,EACV,UAAU,2NASb,GACC,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,CAAI,UAAU,iBACb,CAAA,EAAA,EAAA,GAAA,EAAC,MAAA,CAAI,UAAU,iDACb,CAAA,EAAA,EAAA,GAAA,EAAC,MAAA,CAAI,UAAU,yDAEjB,CAAA,EAAA,EAAA,GAAA,EAAC,IAAA,CAAE,UAAU,sCAA6B,0BAG7C,EAAO,QAAQ,EACd,CAAA,EAAA,EAAA,GAAA,EAAC,IAAA,CAAE,UAAU,qCAA6B,EAAO,QAAQ,YAOjE,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,WACC,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,CAAI,UAAU,mDACb,CAAA,EAAA,EAAA,GAAA,EAAC,QAAA,CAAM,UAAU,mDAA0C,mBAG3D,CAAA,EAAA,EAAA,GAAA,EAAC,SAAA,CACC,KAAK,SACL,QAAS,IAAM,EAAe,CAAC,GAC/B,UAAU,qDAET,EAAc,cAAgB,oBAKnC,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,CAAI,UAAU,uFACb,CAAA,EAAA,EAAA,GAAA,EAAC,SAAA,CACC,KAAK,SACL,QAAS,IAAM,EAAiB,QAChC,UAAU,yFACV,MAAM,yBAEN,CAAA,EAAA,EAAA,GAAA,EAAC,SAAA,UAAO,QAEV,CAAA,EAAA,EAAA,GAAA,EAAC,SAAA,CACC,KAAK,SACL,QAAS,IAAM,EAAiB,UAChC,UAAU,sFACV,MAAM,2BAEN,CAAA,EAAA,EAAA,GAAA,EAAC,KAAA,UAAG,QAEN,CAAA,EAAA,EAAA,IAAA,EAAC,SAAA,CACC,KAAK,SACL,QAAS,IAAM,EAAiB,UAChC,UAAU,iGACV,MAAM,wBAEN,CAAA,EAAA,EAAA,GAAA,EAAC,OAAA,CAAK,UAAU,gBAAO,MAAQ,WAEjC,CAAA,EAAA,EAAA,GAAA,EAAC,SAAA,CACC,KAAK,SACL,QAAS,IAAM,EAAiB,UAChC,UAAU,+EACV,MAAM,yBACP,YAGD,CAAA,EAAA,EAAA,GAAA,EAAC,SAAA,CACC,KAAK,SACL,QAAS,IAAM,EAAiB,QAChC,UAAU,+EACV,MAAM,uBACP,YAGD,CAAA,EAAA,EAAA,GAAA,EAAC,MAAA,CAAI,UAAU,2DACb,CAAA,EAAA,EAAA,GAAA,EAAC,OAAA,UAAK,mEAKV,CAAA,EAAA,EAAA,GAAA,EAAC,MAAA,CAAI,UAAU,6DACb,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,CAAI,UAAU,mCACb,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,WAAI,CAAA,EAAA,EAAA,GAAA,EAAC,SAAA,UAAO,UAAc,eAC3B,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,WAAI,CAAA,EAAA,EAAA,GAAA,EAAC,KAAA,UAAG,YAAY,aACrB,CAAA,EAAA,EAAA,GAAA,EAAC,MAAA,UAAI,mBACL,CAAA,EAAA,EAAA,GAAA,EAAC,MAAA,UAAI,sBACL,CAAA,EAAA,EAAA,GAAA,EAAC,MAAA,UAAI,sBACL,CAAA,EAAA,EAAA,GAAA,EAAC,MAAA,UAAI,iCAIR,EAEC,CAAA,EAAA,EAAA,GAAA,EAAC,EADD,IACC,CAAI,UAAW,CADA,AACC,+CAA+C,EAC9D,EAAO,WAAW,CAAG,iBAAmB,kBAAA,CACxC,UACC,EAAS,WAAW,CAzM7B,CAAA,CA0MU,CA1MV,EAAA,GAAA,EAAC,MAAA,CAAI,UAAU,qCACb,CAAA,EAAA,EAAA,GAAA,EAAC,MAAA,CACC,UAAU,oCACV,wBAAyB,CAAE,MAAA,EAxB3B,AAwBmC,EAxBvB,AAwBkC,EAAS,EAvBzD,SAuBoE,CAtBnE,OAAO,CAAC,MAAO,OAChB,CACC,OAAO,CAAC,EAHiC,UAGpB,UACtB,CACC,OAAO,CAAC,EAHiC,eAGf,UADS,YAEpC,CACC,OAAO,CAAC,aAAc,UADS,IAEhC,CACC,OAAO,CAAC,uBAAwB,QADO,MAExC,CACC,OAAO,CAAC,6BAA8B,IADG,UAE1C,CACC,OAAO,CAAC,sBAAuB,IADG,yDAI9B,CAAC,GAAG,EAAE,EAAU,IAAI,CAAC,CAO4C,MAyM9D,CAAA,EAAA,EAAA,GAAA,EAAC,IAAA,CAAE,UAAU,gCAAuB,kCAKxC,CAAA,CADA,CACA,EAAA,GAAA,EAAC,MADa,KACb,CACC,IAAK,EACL,KAAK,cACL,MAAO,EAAS,WAAW,CAC3B,SAAU,EACV,KAAK,KACL,UAAW,CAAC,yGAAyG,EACnH,EAAO,WAAW,CAAG,iBAAmB,kBAAA,CACxC,CACF,YAAY,8VAsBf,EAAO,WAAW,EACjB,CAAA,EAAA,EAAA,GAAA,EAAC,IAAA,CAAE,UAAU,qCAA6B,EAAO,WAAW,GAE9D,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,CAAI,UAAU,8CACb,CAAA,EAAA,EAAA,GAAA,EAAC,OAAA,CAAK,UAAW,CAAA,EAAG,EAAS,WAAW,CAAC,MAAM,CAAG,GAAK,eAAiB,gBAAA,CAAiB,UAAE,mCAG3F,CAAA,EAAA,EAAA,IAAA,EAAC,OAAA,CAAK,UAAW,CAAA,EACf,EAAS,WAAW,CAAC,MAAM,EAAI,GAAK,iBAAmB,gBAAA,CACvD,WACC,EAAS,WAAW,CAAC,MAAM,CAAC,uBAMnC,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,CAAI,UAAU,4CACZ,GACC,CAAA,EAAA,EAAA,GAAA,EAAC,SAAA,CACC,KAAK,SACL,QAAS,EACT,SAAU,GAAa,EACvB,UAAU,gNACX,WAKH,CAAA,EAAA,EAAA,GAAA,EAAC,SAAA,CACC,KAAK,SACL,SAAU,GAAa,EACvB,UAAW,CAAC,gEAAgE,EAC1E,GAAa,EACT,iCACA,wGAAA,CACJ,UAED,EACC,CAAA,EAAA,EAAA,IAAA,EAAA,EAAA,QAAA,CAAA,WACE,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,CAAI,UAAU,6CAA6C,KAAK,OAAO,QAAQ,sBAC9E,CAAA,EAAA,EAAA,GAAA,EAAC,SAAA,CAAO,UAAU,aAAa,GAAG,KAAK,GAAG,KAAK,EAAE,KAAK,OAAO,eAAe,YAAY,MACxF,CAAA,EAAA,EAAA,GAAA,EAAC,OAAA,CAAK,UAAU,aAAa,KAAK,eAAe,EAAE,uHAEpD,EAAa,cAAgB,mBAE9B,EACF,qBAEA,EAAa,mBAAqB,8BAOhD"}