{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 46, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/HP/Downloads/coinplusweb/app/lib/prisma.js"],"sourcesContent":["// app/lib/prisma.js\r\nimport { PrismaClient } from '@prisma/client'\r\n\r\nconst globalForPrisma = globalThis\r\n\r\nconst prisma =\r\n  globalForPrisma.prisma ??\r\n  new PrismaClient({\r\n    log: ['error', 'warn'],\r\n  })\r\n\r\nif (process.env.NODE_ENV !== 'production') {\r\n  globalForPrisma.prisma = prisma\r\n}\r\n\r\nexport default prisma\r\n"],"names":[],"mappings":"AAAA,oBAAoB;;;;;AACpB;;AAEA,MAAM,kBAAkB;AAExB,MAAM,SACJ,gBAAgB,MAAM,IACtB,IAAI,6IAAY,CAAC;IACf,KAAK;QAAC;QAAS;KAAO;AACxB;AAEF,wCAA2C;IACzC,gBAAgB,MAAM,GAAG;AAC3B;uCAEe"}},
    {"offset": {"line": 74, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/HP/Downloads/coinplusweb/app/api/chits/%5Bid%5D/route.js"],"sourcesContent":["// app/api/chits/[id]/route.js\r\n\r\nimport prisma from '../../../lib/prisma'\r\nimport { NextResponse } from 'next/server'\r\n\r\nexport async function GET(request, { params }) {\r\n  try {\r\n    // Await params first\r\n    const { id } = await params\r\n    const parsedId = parseInt(id)\r\n\r\n    if (isNaN(parsedId)) {\r\n      return NextResponse.json(\r\n        { success: false, error: 'Invalid ID format' },\r\n        { status: 400 }\r\n      )\r\n    }\r\n\r\n    const chit = await prisma.chit.findUnique({\r\n      where: { id: parsedId }  // Use field name 'id' with parsedId value\r\n    })\r\n\r\n    if (!chit) {\r\n      return NextResponse.json(\r\n        { success: false, error: 'Chit not found' },\r\n        { status: 404 }\r\n      )\r\n    }\r\n\r\n    return NextResponse.json({\r\n      success: true,\r\n      data: chit\r\n    })\r\n\r\n  } catch (error) {\r\n    return NextResponse.json(\r\n      { success: false, error: error.message },\r\n      { status: 500 }\r\n    )\r\n  }\r\n}\r\n\r\nexport async function PUT(request, { params }) {\r\n  try {\r\n    const { id } = await params\r\n    const parsedId = parseInt(id)\r\n    const body = await request.json()\r\n\r\n    if (isNaN(parsedId)) {\r\n      return NextResponse.json(\r\n        { success: false, error: 'Invalid ID format' },\r\n        { status: 400 }\r\n      )\r\n    }\r\n\r\n    // Check if chit exists - use field name 'id' with parsedId value\r\n    const existingChit = await prisma.chit.findUnique({\r\n      where: { id: parsedId }\r\n    })\r\n\r\n    if (!existingChit) {\r\n      return NextResponse.json(\r\n        { success: false, error: 'Chit not found' },\r\n        { status: 404 }\r\n      )\r\n    }\r\n\r\n    // Helper functions for parsing\r\n    const parseFloatOrNull = (value) => {\r\n      if (value === null || value === undefined || value === '') {\r\n        return null\r\n      }\r\n      const parsed = parseFloat(value)\r\n      return isNaN(parsed) ? null : parsed\r\n    }\r\n\r\n    const parseIntOrNull = (value) => {\r\n      if (value === null || value === undefined || value === '') {\r\n        return null\r\n      }\r\n      const parsed = parseInt(value)\r\n      return isNaN(parsed) ? null : parsed\r\n    }\r\n\r\n    // Update chit - use field name 'id' with parsedId value\r\n    const updatedChit = await prisma.chit.update({\r\n      where: { id: parsedId },\r\n      data: {\r\n        chit_value: body.chit_value !== undefined ? parseFloat(body.chit_value) : existingChit.chit_value,\r\n        location: body.location !== undefined ? body.location : existingChit.location,\r\n        state: body.state !== undefined ? body.state : existingChit.state,\r\n        branch: body.branch !== undefined ? body.branch : existingChit.branch,\r\n        phone_number_1: body.phone_number_1 !== undefined ? body.phone_number_1 : existingChit.phone_number_1,\r\n        phone_number_2: body.phone_number_2 !== undefined ? body.phone_number_2 : existingChit.phone_number_2,\r\n        monthly_contribution: body.monthly_contribution !== undefined ? parseFloatOrNull(body.monthly_contribution) : existingChit.monthly_contribution,\r\n        chit_group: body.chit_group !== undefined ? body.chit_group : existingChit.chit_group,\r\n        duration_months: body.duration_months !== undefined ? parseIntOrNull(body.duration_months) : existingChit.duration_months\r\n      }\r\n    })\r\n\r\n    return NextResponse.json({\r\n      success: true,\r\n      message: 'Chit updated successfully',\r\n      data: updatedChit\r\n    })\r\n\r\n  } catch (error) {\r\n    console.error('PUT error:', error)\r\n    return NextResponse.json(\r\n      { success: false, error: error.message },\r\n      { status: 500 }\r\n    )\r\n  }\r\n}\r\n\r\nexport async function DELETE(request, { params }) {\r\n  try {\r\n    const { id } = await params\r\n    const parsedId = parseInt(id)\r\n\r\n    if (isNaN(parsedId)) {\r\n      return NextResponse.json(\r\n        { success: false, error: 'Invalid ID format' },\r\n        { status: 400 }\r\n      )\r\n    }\r\n\r\n    // Check if chit exists - use field name 'id' with parsedId value\r\n    const existingChit = await prisma.chit.findUnique({\r\n      where: { id: parsedId }\r\n    })\r\n\r\n    if (!existingChit) {\r\n      return NextResponse.json(\r\n        { success: false, error: 'Chit not found' },\r\n        { status: 404 }\r\n      )\r\n    }\r\n\r\n    // Delete chit - use field name 'id' with parsedId value\r\n    await prisma.chit.delete({\r\n      where: { id: parsedId }\r\n    })\r\n\r\n    return NextResponse.json({\r\n      success: true,\r\n      message: 'Chit deleted successfully'\r\n    })\r\n\r\n  } catch (error) {\r\n    console.error('DELETE error:', error)\r\n    return NextResponse.json(\r\n      { success: false, error: error.message },\r\n      { status: 500 }\r\n    )\r\n  }\r\n}"],"names":[],"mappings":"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"}}]
}