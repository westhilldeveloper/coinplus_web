{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 46, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/HP/Downloads/coinplusweb/app/api/chits/create/route.js"],"sourcesContent":["// app/api/chits/create/route.js\r\nimport prisma from '@/app/lib/prisma'\r\nimport { NextResponse } from 'next/server'\r\n\r\nexport async function POST(request) {\r\n  try {\r\n    const body = await request.json()\r\n\r\n    // Validate required fields\r\n    const requiredFields = ['chit_value', 'location', 'state', 'branch']\r\n    const missingFields = requiredFields.filter(field => !body[field])\r\n\r\n    if (missingFields.length > 0) {\r\n      return NextResponse.json(\r\n        { \r\n          success: false, \r\n          error: `Missing required fields: ${missingFields.join(', ')}` \r\n        },\r\n        { status: 400 }\r\n      )\r\n    }\r\n\r\n    // Validate chit_value is positive\r\n    if (body.chit_value <= 0) {\r\n      return NextResponse.json(\r\n        { success: false, error: 'Chit value must be positive' },\r\n        { status: 400 }\r\n      )\r\n    }\r\n\r\n    // Create chit\r\n    const chit = await prisma.chit.create({\r\n      data: {\r\n        chit_value: parseFloat(body.chit_value),\r\n        location: body.location,\r\n        state: body.state,\r\n        branch: body.branch,\r\n        phone_number_1: body.phone_number_1 || null,\r\n        phone_number_2: body.phone_number_2 || null,\r\n        monthly_contribution: body.monthly_contribution || null,\r\n        chit_group: body.chit_group || null,\r\n        duration_months: body.duration_months ? parseInt(body.duration_months) : null\r\n      }\r\n    })\r\n\r\n    return NextResponse.json({\r\n      success: true,\r\n      message: 'Chit created successfully',\r\n      data: chit\r\n    }, { status: 201 })\r\n\r\n  } catch (error) {\r\n    console.error('Create chit error:', error)\r\n    return NextResponse.json(\r\n      { success: false, error: error.message },\r\n      { status: 500 }\r\n    )\r\n  }\r\n}"],"names":[],"mappings":"AAAA,gCAAgC;;;;;;;;;;AAEhC;;;AAEO,eAAe,KAAK,OAAO;IAChC,IAAI;QACF,MAAM,OAAO,MAAM,QAAQ,IAAI;QAE/B,2BAA2B;QAC3B,MAAM,iBAAiB;YAAC;YAAc;YAAY;YAAS;SAAS;QACpE,MAAM,gBAAgB,eAAe,MAAM,CAAC,CAAA,QAAS,CAAC,IAAI,CAAC,MAAM;QAEjE,IAAI,cAAc,MAAM,GAAG,GAAG;YAC5B,OAAO,gJAAY,CAAC,IAAI,CACtB;gBACE,SAAS;gBACT,OAAO,CAAC,yBAAyB,EAAE,cAAc,IAAI,CAAC,OAAO;YAC/D,GACA;gBAAE,QAAQ;YAAI;QAElB;QAEA,kCAAkC;QAClC,IAAI,KAAK,UAAU,IAAI,GAAG;YACxB,OAAO,gJAAY,CAAC,IAAI,CACtB;gBAAE,SAAS;gBAAO,OAAO;YAA8B,GACvD;gBAAE,QAAQ;YAAI;QAElB;QAEA,cAAc;QACd,MAAM,OAAO,MAAM,OAAO,IAAI,CAAC,MAAM,CAAC;YACpC,MAAM;gBACJ,YAAY,WAAW,KAAK,UAAU;gBACtC,UAAU,KAAK,QAAQ;gBACvB,OAAO,KAAK,KAAK;gBACjB,QAAQ,KAAK,MAAM;gBACnB,gBAAgB,KAAK,cAAc,IAAI;gBACvC,gBAAgB,KAAK,cAAc,IAAI;gBACvC,sBAAsB,KAAK,oBAAoB,IAAI;gBACnD,YAAY,KAAK,UAAU,IAAI;gBAC/B,iBAAiB,KAAK,eAAe,GAAG,SAAS,KAAK,eAAe,IAAI;YAC3E;QACF;QAEA,OAAO,gJAAY,CAAC,IAAI,CAAC;YACvB,SAAS;YACT,SAAS;YACT,MAAM;QACR,GAAG;YAAE,QAAQ;QAAI;IAEnB,EAAE,OAAO,OAAO;QACd,QAAQ,KAAK,CAAC,sBAAsB;QACpC,OAAO,gJAAY,CAAC,IAAI,CACtB;YAAE,SAAS;YAAO,OAAO,MAAM,OAAO;QAAC,GACvC;YAAE,QAAQ;QAAI;IAElB;AACF"}}]
}