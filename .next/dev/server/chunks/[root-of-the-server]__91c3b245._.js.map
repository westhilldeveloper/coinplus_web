{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 136, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/HP/Downloads/coinplusweb/app/api/careers/apply/route.js"],"sourcesContent":["// app/api/careers/apply/route.js\r\nimport { NextResponse } from 'next/server';\r\nimport nodemailer from 'nodemailer';\r\n\r\nexport async function POST(request) {\r\n  try {\r\n    const formData = await request.formData();\r\n    \r\n    // Extract form data\r\n    const name = formData.get('name');\r\n    const email = formData.get('email');\r\n    const phone = formData.get('phone');\r\n    const message = formData.get('message') || '';\r\n    const resume = formData.get('resume');\r\n    \r\n    // Validate required fields\r\n    if (!name || !email || !phone || !resume) {\r\n      return NextResponse.json(\r\n        { error: 'All required fields must be filled' },\r\n        { status: 400 }\r\n      );\r\n    }\r\n    \r\n    // Get admin email from environment variables\r\n    const adminEmail = process.env.ADMIN_EMAIL || 'admin@Finovest.com';\r\n    const adminName = process.env.ADMIN_NAME || 'Admin User';\r\n    \r\n    // Create transporter\r\n    const transporter = nodemailer.createTransport({\r\n      host: process.env.EMAIL_HOST || 'smtp.gmail.com',\r\n      port: process.env.EMAIL_PORT || 587,\r\n      secure: false,\r\n      auth: {\r\n        user: process.env.EMAIL_USER,\r\n        pass: process.env.EMAIL_PASSWORD,\r\n      },\r\n    });\r\n    \r\n    // Convert resume file to buffer for attachment\r\n    const resumeBuffer = Buffer.from(await resume.arrayBuffer());\r\n    const resumeFileName = resume.name || 'resume.pdf';\r\n    \r\n    // Email to admin\r\n    const adminMailOptions = {\r\n      from: process.env.EMAIL_FROM || '\"Finovest Careers\" <noreply@Finovest.com>',\r\n      to: adminEmail,\r\n      subject: `New Career Application: ${name}`,\r\n      html: `\r\n        <div style=\"font-family: Arial, sans-serif; max-width: 600px; margin: 0 auto;\">\r\n          <h2 style=\"color: #1e40af;\">New Career Application Received</h2>\r\n          \r\n          <div style=\"background-color: #f3f4f6; padding: 20px; border-radius: 8px; margin: 20px 0;\">\r\n            <h3 style=\"color: #374151; margin-top: 0;\">Applicant Details:</h3>\r\n            <table style=\"width: 100%; border-collapse: collapse;\">\r\n              <tr>\r\n                <td style=\"padding: 8px 0; color: #6b7280;\"><strong>Name:</strong></td>\r\n                <td style=\"padding: 8px 0; color: #374151;\">${name}</td>\r\n              </tr>\r\n              <tr>\r\n                <td style=\"padding: 8px 0; color: #6b7280;\"><strong>Email:</strong></td>\r\n                <td style=\"padding: 8px 0; color: #374151;\">${email}</td>\r\n              </tr>\r\n              <tr>\r\n                <td style=\"padding: 8px 0; color: #6b7280;\"><strong>Phone:</strong></td>\r\n                <td style=\"padding: 8px 0; color: #374151;\">${phone}</td>\r\n              </tr>\r\n              ${message ? `\r\n              <tr>\r\n                <td style=\"padding: 8px 0; color: #6b7280;\"><strong>Message:</strong></td>\r\n                <td style=\"padding: 8px 0; color: #374151;\">${message}</td>\r\n              </tr>\r\n              ` : ''}\r\n              <tr>\r\n                <td style=\"padding: 8px 0; color: #6b7280;\"><strong>Submitted At:</strong></td>\r\n                <td style=\"padding: 8px 0; color: #374151;\">${new Date().toLocaleString()}</td>\r\n              </tr>\r\n            </table>\r\n          </div>\r\n          \r\n          <p style=\"color: #4b5563;\">\r\n            The applicant's resume is attached to this email. Please review the application and follow up with the candidate.\r\n          </p>\r\n          \r\n          <div style=\"margin-top: 30px; padding-top: 20px; border-top: 1px solid #e5e7eb;\">\r\n            <p style=\"color: #6b7280; font-size: 14px;\">\r\n              This email was automatically generated from the Finovest Careers portal.\r\n            </p>\r\n          </div>\r\n        </div>\r\n      `,\r\n      attachments: [\r\n        {\r\n          filename: resumeFileName,\r\n          content: resumeBuffer,\r\n          contentType: resume.type || 'application/pdf',\r\n        },\r\n      ],\r\n    };\r\n    \r\n    // Email to applicant (confirmation)\r\n    const applicantMailOptions = {\r\n      from: process.env.EMAIL_FROM || '\"Finovest Careers\" <noreply@Finovest.com>',\r\n      to: email,\r\n      subject: 'Thank You for Your Application - Finovest',\r\n      html: `\r\n        <div style=\"font-family: Arial, sans-serif; max-width: 600px; margin: 0 auto;\">\r\n          <div style=\"text-align: center; margin-bottom: 30px;\">\r\n            <h1 style=\"color: #1e40af; margin-bottom: 10px;\">Thank You for Your Application!</h1>\r\n            <p style=\"color: #6b7280;\">We have received your application for a career opportunity at Finovest.</p>\r\n          </div>\r\n          \r\n          <div style=\"background-color: #f0f9ff; padding: 25px; border-radius: 8px; border-left: 4px solid #3b82f6; margin: 20px 0;\">\r\n            <h3 style=\"color: #1e40af; margin-top: 0;\">Application Details:</h3>\r\n            <table style=\"width: 100%; border-collapse: collapse;\">\r\n              <tr>\r\n                <td style=\"padding: 8px 0; color: #6b7280;\"><strong>Applicant Name:</strong></td>\r\n                <td style=\"padding: 8px 0; color: #374151;\">${name}</td>\r\n              </tr>\r\n              <tr>\r\n                <td style=\"padding: 8px 0; color: #6b7280;\"><strong>Position Applied:</strong></td>\r\n                <td style=\"padding: 8px 0; color: #374151;\">Multiple Opportunities</td>\r\n              </tr>\r\n              <tr>\r\n                <td style=\"padding: 8px 0; color: #6b7280;\"><strong>Application Date:</strong></td>\r\n                <td style=\"padding: 8px 0; color: #374151;\">${new Date().toLocaleDateString()}</td>\r\n              </tr>\r\n              <tr>\r\n                <td style=\"padding: 8px 0; color: #6b7280;\"><strong>Reference ID:</strong></td>\r\n                <td style=\"padding: 8px 0; color: #374151;\">MARG-${Date.now().toString().slice(-8)}</td>\r\n              </tr>\r\n            </table>\r\n          </div>\r\n          \r\n          <div style=\"background-color: #f3f4f6; padding: 20px; border-radius: 8px; margin: 20px 0;\">\r\n            <h3 style=\"color: #374151; margin-top: 0;\">What Happens Next?</h3>\r\n            <ol style=\"color: #4b5563; padding-left: 20px;\">\r\n              <li style=\"margin-bottom: 8px;\">Our HR team will review your application</li>\r\n              <li style=\"margin-bottom: 8px;\">If your profile matches our requirements, we will contact you for the next steps</li>\r\n              <li style=\"margin-bottom: 8px;\">The selection process may include interviews and assessments</li>\r\n              <li>You will be notified about the status of your application via email</li>\r\n            </ol>\r\n          </div>\r\n          \r\n          <div style=\"margin-top: 30px; padding: 20px; background-color: #fef3c7; border-radius: 8px; border-left: 4px solid #d97706;\">\r\n            <h3 style=\"color: #92400e; margin-top: 0;\">Important Information:</h3>\r\n            <ul style=\"color: #92400e; padding-left: 20px;\">\r\n              <li style=\"margin-bottom: 5px;\">Please ensure your contact information is accurate</li>\r\n              <li style=\"margin-bottom: 5px;\">Keep an eye on your email (including spam folder) for updates</li>\r\n              <li>The typical response time is 7-10 business days</li>\r\n            </ul>\r\n          </div>\r\n          \r\n          <div style=\"margin-top: 40px; padding-top: 20px; border-top: 1px solid #e5e7eb; text-align: center;\">\r\n            <p style=\"color: #6b7280; font-size: 14px;\">\r\n              For any queries, please contact our HR department at <a href=\"mailto:hr@Finovest.com\" style=\"color: #3b82f6;\">hr@Finovest.com</a>\r\n            </p>\r\n            <p style=\"color: #9ca3af; font-size: 12px; margin-top: 10px;\">\r\n              Finovest Chit Fund Pvt. Ltd.<br />\r\n              Building Trust Since 1962\r\n            </p>\r\n          </div>\r\n        </div>\r\n      `,\r\n    };\r\n    \r\n    // Send emails\r\n    await transporter.sendMail(adminMailOptions);\r\n    await transporter.sendMail(applicantMailOptions);\r\n    \r\n    return NextResponse.json({\r\n      success: true,\r\n      message: 'Application submitted successfully. Confirmation email sent.',\r\n      referenceId: `MARG-${Date.now().toString().slice(-8)}`\r\n    });\r\n    \r\n  } catch (error) {\r\n    console.error('Error processing application:', error);\r\n    return NextResponse.json(\r\n      { error: 'Failed to process application. Please try again later.' },\r\n      { status: 500 }\r\n    );\r\n  }\r\n}"],"names":[],"mappings":"AAAA,iCAAiC;;;;;AACjC;AACA;;;AAEO,eAAe,KAAK,OAAO;IAChC,IAAI;QACF,MAAM,WAAW,MAAM,QAAQ,QAAQ;QAEvC,oBAAoB;QACpB,MAAM,OAAO,SAAS,GAAG,CAAC;QAC1B,MAAM,QAAQ,SAAS,GAAG,CAAC;QAC3B,MAAM,QAAQ,SAAS,GAAG,CAAC;QAC3B,MAAM,UAAU,SAAS,GAAG,CAAC,cAAc;QAC3C,MAAM,SAAS,SAAS,GAAG,CAAC;QAE5B,2BAA2B;QAC3B,IAAI,CAAC,QAAQ,CAAC,SAAS,CAAC,SAAS,CAAC,QAAQ;YACxC,OAAO,gJAAY,CAAC,IAAI,CACtB;gBAAE,OAAO;YAAqC,GAC9C;gBAAE,QAAQ;YAAI;QAElB;QAEA,6CAA6C;QAC7C,MAAM,aAAa,QAAQ,GAAG,CAAC,WAAW,IAAI;QAC9C,MAAM,YAAY,QAAQ,GAAG,CAAC,UAAU,IAAI;QAE5C,qBAAqB;QACrB,MAAM,cAAc,4JAAU,CAAC,eAAe,CAAC;YAC7C,MAAM,QAAQ,GAAG,CAAC,UAAU,IAAI;YAChC,MAAM,QAAQ,GAAG,CAAC,UAAU,IAAI;YAChC,QAAQ;YACR,MAAM;gBACJ,MAAM,QAAQ,GAAG,CAAC,UAAU;gBAC5B,MAAM,QAAQ,GAAG,CAAC,cAAc;YAClC;QACF;QAEA,+CAA+C;QAC/C,MAAM,eAAe,OAAO,IAAI,CAAC,MAAM,OAAO,WAAW;QACzD,MAAM,iBAAiB,OAAO,IAAI,IAAI;QAEtC,iBAAiB;QACjB,MAAM,mBAAmB;YACvB,MAAM,QAAQ,GAAG,CAAC,UAAU,IAAI;YAChC,IAAI;YACJ,SAAS,CAAC,wBAAwB,EAAE,MAAM;YAC1C,MAAM,CAAC;;;;;;;;;4DAS+C,EAAE,KAAK;;;;4DAIP,EAAE,MAAM;;;;4DAIR,EAAE,MAAM;;cAEtD,EAAE,UAAU,CAAC;;;4DAGiC,EAAE,QAAQ;;cAExD,CAAC,GAAG,GAAG;;;4DAGuC,EAAE,IAAI,OAAO,cAAc,GAAG;;;;;;;;;;;;;;;MAepF,CAAC;YACD,aAAa;gBACX;oBACE,UAAU;oBACV,SAAS;oBACT,aAAa,OAAO,IAAI,IAAI;gBAC9B;aACD;QACH;QAEA,oCAAoC;QACpC,MAAM,uBAAuB;YAC3B,MAAM,QAAQ,GAAG,CAAC,UAAU,IAAI;YAChC,IAAI;YACJ,SAAS;YACT,MAAM,CAAC;;;;;;;;;;;;4DAY+C,EAAE,KAAK;;;;;;;;4DAQP,EAAE,IAAI,OAAO,kBAAkB,GAAG;;;;iEAI7B,EAAE,KAAK,GAAG,GAAG,QAAQ,GAAG,KAAK,CAAC,CAAC,GAAG;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;MAkC7F,CAAC;QACH;QAEA,cAAc;QACd,MAAM,YAAY,QAAQ,CAAC;QAC3B,MAAM,YAAY,QAAQ,CAAC;QAE3B,OAAO,gJAAY,CAAC,IAAI,CAAC;YACvB,SAAS;YACT,SAAS;YACT,aAAa,CAAC,KAAK,EAAE,KAAK,GAAG,GAAG,QAAQ,GAAG,KAAK,CAAC,CAAC,IAAI;QACxD;IAEF,EAAE,OAAO,OAAO;QACd,QAAQ,KAAK,CAAC,iCAAiC;QAC/C,OAAO,gJAAY,CAAC,IAAI,CACtB;YAAE,OAAO;QAAyD,GAClE;YAAE,QAAQ;QAAI;IAElB;AACF"}}]
}