{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 4, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/HP/Downloads/coinplusweb/components/Admin/components/GalleryList.js"],"sourcesContent":["// components/Admin/components/GalleryList.js\r\n\"use client\";\r\n\r\nimport { useState, useEffect } from 'react';\r\nimport { useRouter } from 'next/navigation';\r\n\r\nexport default function GalleryList() {\r\n  const [galleries, setGalleries] = useState([]);\r\n  const [loading, setLoading] = useState(true);\r\n  const [error, setError] = useState('');\r\n  const [deletingId, setDeletingId] = useState(null);\r\n  const [confirmDelete, setConfirmDelete] = useState(null);\r\n  const router = useRouter();\r\n\r\n  useEffect(() => {\r\n    fetchGalleries();\r\n  }, []);\r\n\r\n  const fetchGalleries = async () => {\r\n    try {\r\n      const response = await fetch('/api/admin/gallery');\r\n      const data = await response.json();\r\n      \r\n      if (!response.ok) {\r\n        throw new Error(data.error || 'Failed to fetch galleries');\r\n      }\r\n      \r\n      setGalleries(data.data || []);\r\n      setError('');\r\n    } catch (err) {\r\n      console.error('Fetch error:', err);\r\n      setError(err.message);\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  };\r\n\r\n  const handleDelete = async (id) => {\r\n    setDeletingId(id);\r\n    \r\n    try {\r\n      const response = await fetch(`/api/admin/gallery/${id}`, {\r\n        method: 'DELETE',\r\n      });\r\n      \r\n      const data = await response.json();\r\n      \r\n      if (!response.ok) {\r\n        throw new Error(data.error || 'Failed to delete gallery');\r\n      }\r\n      \r\n      // Remove from local state\r\n      setGalleries(prev => prev.filter(gallery => gallery.id !== id));\r\n      setConfirmDelete(null);\r\n    } catch (err) {\r\n      console.error('Delete error:', err);\r\n      setError(err.message);\r\n    } finally {\r\n      setDeletingId(null);\r\n    }\r\n  };\r\n\r\n  const handleEdit = (id) => {\r\n    router.push(`/admin/media/gallery/edit/${id}`);\r\n  };\r\n\r\n  if (loading) return (\r\n    <div className=\"flex justify-center py-12\">\r\n      <div className=\"animate-spin rounded-full h-10 w-10 border-b-2 border-blue-600\"></div>\r\n    </div>\r\n  );\r\n  \r\n  if (error) return (\r\n    <div className=\"text-center py-12\">\r\n      <div className=\"text-red-600 mb-2\">Error loading galleries</div>\r\n      <div className=\"text-sm text-gray-600 mb-4\">{error}</div>\r\n      <button \r\n        onClick={fetchGalleries}\r\n        className=\"px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700\"\r\n      >\r\n        Try again\r\n      </button>\r\n    </div>\r\n  );\r\n\r\n  return (\r\n    <div className=\"space-y-6\">\r\n      <div className=\"flex justify-between items-center\">\r\n        <h2 className=\"text-2xl font-bold text-gray-800\">Galleries</h2>\r\n        <button\r\n          onClick={() => router.push('/admin/media/gallery/create')}\r\n          className=\"px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 flex items-center\"\r\n        >\r\n          <svg className=\"w-5 h-5 mr-2\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\r\n            <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth=\"2\" d=\"M12 4v16m8-8H4\" />\r\n          </svg>\r\n          Create Gallery\r\n        </button>\r\n      </div>\r\n      \r\n      {galleries.length === 0 ? (\r\n        <div className=\"text-center py-12 text-gray-500\">\r\n          <svg className=\"mx-auto h-16 w-16 text-gray-400 mb-4\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\r\n            <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth=\"1.5\" d=\"M4 16l4.586-4.586a2 2 0 012.828 0L16 16m-2-2l1.586-1.586a2 2 0 012.828 0L20 14m-6-6h.01M6 20h12a2 2 0 002-2V6a2 2 0 00-2-2H6a2 2 0 00-2 2v12a2 2 0 002 2z\" />\r\n          </svg>\r\n          <p className=\"text-lg\">No galleries yet</p>\r\n          <p className=\"text-sm mt-1\">Create your first gallery to get started</p>\r\n        </div>\r\n      ) : (\r\n        <div className=\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6\">\r\n          {galleries.map((gallery) => (\r\n            <div \r\n              key={gallery.id} \r\n              className=\"bg-white rounded-lg shadow-md overflow-hidden border border-gray-200 hover:shadow-lg transition-shadow duration-300\"\r\n            >\r\n              {/* Gallery Cover Image */}\r\n              <div className=\"relative h-48 w-full overflow-hidden bg-gray-100\">\r\n                {gallery.images.length > 0 ? (\r\n                  <img\r\n                    src={gallery.images[0]}\r\n                    alt={gallery.title}\r\n                    className=\"w-full h-full object-cover\"\r\n                  />\r\n                ) : (\r\n                  <div className=\"w-full h-full flex items-center justify-center text-gray-400\">\r\n                    <svg className=\"w-12 h-12\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\r\n                      <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth=\"1\" d=\"M4 16l4.586-4.586a2 2 0 012.828 0L16 16m-2-2l1.586-1.586a2 2 0 012.828 0L20 14m-6-6h.01M6 20h12a2 2 0 002-2V6a2 2 0 00-2-2H6a2 2 0 00-2 2v12a2 2 0 002 2z\" />\r\n                    </svg>\r\n                  </div>\r\n                )}\r\n                <div className=\"absolute top-2 right-2 bg-blue-600 text-white text-xs px-2 py-1 rounded\">\r\n                  {gallery.images.length} photos\r\n                </div>\r\n              </div>\r\n              \r\n              {/* Gallery Info */}\r\n              <div className=\"p-4\">\r\n                <h3 className=\"font-semibold text-lg text-gray-800 mb-2 truncate\">\r\n                  {gallery.title}\r\n                </h3>\r\n                <p className=\"text-gray-600 text-sm mb-3 line-clamp-2\">\r\n                  {gallery.description}\r\n                </p>\r\n                \r\n                <div className=\"flex items-center justify-between text-sm text-gray-500 mb-4\">\r\n                  <div className=\"flex items-center\">\r\n                    <svg className=\"w-4 h-4 mr-1\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\r\n                      <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth=\"2\" d=\"M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z\" />\r\n                    </svg>\r\n                    {new Date(gallery.createdAt).toLocaleDateString()}\r\n                  </div>\r\n                  <div className=\"text-xs bg-gray-100 px-2 py-1 rounded\">\r\n                    ID: {gallery.id}\r\n                  </div>\r\n                </div>\r\n                \r\n                {/* Action Buttons */}\r\n                <div className=\"flex space-x-2\">\r\n                  <button\r\n                    onClick={() => handleEdit(gallery.id)}\r\n                    className=\"flex-1 px-3 py-2 bg-blue-50 text-blue-700 rounded-md hover:bg-blue-100 text-sm font-medium flex items-center justify-center\"\r\n                  >\r\n                    <svg className=\"w-4 h-4 mr-2\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\r\n                      <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth=\"2\" d=\"M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z\" />\r\n                    </svg>\r\n                    Edit\r\n                  </button>\r\n                  \r\n                  <button\r\n                    onClick={() => setConfirmDelete(gallery.id)}\r\n                    disabled={deletingId === gallery.id}\r\n                    className=\"flex-1 px-3 py-2 bg-red-50 text-red-700 rounded-md hover:bg-red-100 text-sm font-medium flex items-center justify-center disabled:opacity-50\"\r\n                  >\r\n                    {deletingId === gallery.id ? (\r\n                      <>\r\n                        <svg className=\"animate-spin w-4 h-4 mr-2\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\r\n                          <circle className=\"opacity-25\" cx=\"12\" cy=\"12\" r=\"10\" stroke=\"currentColor\" strokeWidth=\"4\"/>\r\n                          <path className=\"opacity-75\" fill=\"currentColor\" d=\"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z\"/>\r\n                        </svg>\r\n                        Deleting...\r\n                      </>\r\n                    ) : (\r\n                      <>\r\n                        <svg className=\"w-4 h-4 mr-2\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\r\n                          <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth=\"2\" d=\"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16\" />\r\n                        </svg>\r\n                        Delete\r\n                      </>\r\n                    )}\r\n                  </button>\r\n                </div>\r\n              </div>\r\n            </div>\r\n          ))}\r\n        </div>\r\n      )}\r\n      \r\n      {/* Delete Confirmation Modal */}\r\n      {confirmDelete && (\r\n        <div className=\"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50\">\r\n          <div className=\"bg-white rounded-lg p-6 max-w-md w-full\">\r\n            <h3 className=\"text-lg font-semibold text-gray-800 mb-2\">Confirm Delete</h3>\r\n            <p className=\"text-gray-600 mb-6\">\r\n              Are you sure you want to delete this gallery? This action cannot be undone.\r\n            </p>\r\n            <div className=\"flex justify-end space-x-3\">\r\n              <button\r\n                onClick={() => setConfirmDelete(null)}\r\n                className=\"px-4 py-2 border border-gray-300 text-gray-700 rounded-md hover:bg-gray-50\"\r\n              >\r\n                Cancel\r\n              </button>\r\n              <button\r\n                onClick={() => handleDelete(confirmDelete)}\r\n                className=\"px-4 py-2 bg-red-600 text-white rounded-md hover:bg-red-700\"\r\n              >\r\n                Delete Gallery\r\n              </button>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      )}\r\n    </div>\r\n  );\r\n}"],"names":[],"mappings":"AAAA,6CAA6C;;;;;;AAG7C;AACA;;;AAHA;;;AAKe,SAAS;;IACtB,MAAM,CAAC,WAAW,aAAa,GAAG,IAAA,yKAAQ,EAAC,EAAE;IAC7C,MAAM,CAAC,SAAS,WAAW,GAAG,IAAA,yKAAQ,EAAC;IACvC,MAAM,CAAC,OAAO,SAAS,GAAG,IAAA,yKAAQ,EAAC;IACnC,MAAM,CAAC,YAAY,cAAc,GAAG,IAAA,yKAAQ,EAAC;IAC7C,MAAM,CAAC,eAAe,iBAAiB,GAAG,IAAA,yKAAQ,EAAC;IACnD,MAAM,SAAS,IAAA,kJAAS;IAExB,IAAA,0KAAS;iCAAC;YACR;QACF;gCAAG,EAAE;IAEL,MAAM,iBAAiB;QACrB,IAAI;YACF,MAAM,WAAW,MAAM,MAAM;YAC7B,MAAM,OAAO,MAAM,SAAS,IAAI;YAEhC,IAAI,CAAC,SAAS,EAAE,EAAE;gBAChB,MAAM,IAAI,MAAM,KAAK,KAAK,IAAI;YAChC;YAEA,aAAa,KAAK,IAAI,IAAI,EAAE;YAC5B,SAAS;QACX,EAAE,OAAO,KAAK;YACZ,QAAQ,KAAK,CAAC,gBAAgB;YAC9B,SAAS,IAAI,OAAO;QACtB,SAAU;YACR,WAAW;QACb;IACF;IAEA,MAAM,eAAe,OAAO;QAC1B,cAAc;QAEd,IAAI;YACF,MAAM,WAAW,MAAM,MAAM,CAAC,mBAAmB,EAAE,IAAI,EAAE;gBACvD,QAAQ;YACV;YAEA,MAAM,OAAO,MAAM,SAAS,IAAI;YAEhC,IAAI,CAAC,SAAS,EAAE,EAAE;gBAChB,MAAM,IAAI,MAAM,KAAK,KAAK,IAAI;YAChC;YAEA,0BAA0B;YAC1B,aAAa,CAAA,OAAQ,KAAK,MAAM,CAAC,CAAA,UAAW,QAAQ,EAAE,KAAK;YAC3D,iBAAiB;QACnB,EAAE,OAAO,KAAK;YACZ,QAAQ,KAAK,CAAC,iBAAiB;YAC/B,SAAS,IAAI,OAAO;QACtB,SAAU;YACR,cAAc;QAChB;IACF;IAEA,MAAM,aAAa,CAAC;QAClB,OAAO,IAAI,CAAC,CAAC,0BAA0B,EAAE,IAAI;IAC/C;IAEA,IAAI,SAAS,qBACX,6LAAC;QAAI,WAAU;kBACb,cAAA,6LAAC;YAAI,WAAU;;;;;;;;;;;IAInB,IAAI,OAAO,qBACT,6LAAC;QAAI,WAAU;;0BACb,6LAAC;gBAAI,WAAU;0BAAoB;;;;;;0BACnC,6LAAC;gBAAI,WAAU;0BAA8B;;;;;;0BAC7C,6LAAC;gBACC,SAAS;gBACT,WAAU;0BACX;;;;;;;;;;;;IAML,qBACE,6LAAC;QAAI,WAAU;;0BACb,6LAAC;gBAAI,WAAU;;kCACb,6LAAC;wBAAG,WAAU;kCAAmC;;;;;;kCACjD,6LAAC;wBACC,SAAS,IAAM,OAAO,IAAI,CAAC;wBAC3B,WAAU;;0CAEV,6LAAC;gCAAI,WAAU;gCAAe,MAAK;gCAAO,QAAO;gCAAe,SAAQ;0CACtE,cAAA,6LAAC;oCAAK,eAAc;oCAAQ,gBAAe;oCAAQ,aAAY;oCAAI,GAAE;;;;;;;;;;;4BACjE;;;;;;;;;;;;;YAKT,UAAU,MAAM,KAAK,kBACpB,6LAAC;gBAAI,WAAU;;kCACb,6LAAC;wBAAI,WAAU;wBAAuC,MAAK;wBAAO,QAAO;wBAAe,SAAQ;kCAC9F,cAAA,6LAAC;4BAAK,eAAc;4BAAQ,gBAAe;4BAAQ,aAAY;4BAAM,GAAE;;;;;;;;;;;kCAEzE,6LAAC;wBAAE,WAAU;kCAAU;;;;;;kCACvB,6LAAC;wBAAE,WAAU;kCAAe;;;;;;;;;;;qCAG9B,6LAAC;gBAAI,WAAU;0BACZ,UAAU,GAAG,CAAC,CAAC,wBACd,6LAAC;wBAEC,WAAU;;0CAGV,6LAAC;gCAAI,WAAU;;oCACZ,QAAQ,MAAM,CAAC,MAAM,GAAG,kBACvB,6LAAC;wCACC,KAAK,QAAQ,MAAM,CAAC,EAAE;wCACtB,KAAK,QAAQ,KAAK;wCAClB,WAAU;;;;;6DAGZ,6LAAC;wCAAI,WAAU;kDACb,cAAA,6LAAC;4CAAI,WAAU;4CAAY,MAAK;4CAAO,QAAO;4CAAe,SAAQ;sDACnE,cAAA,6LAAC;gDAAK,eAAc;gDAAQ,gBAAe;gDAAQ,aAAY;gDAAI,GAAE;;;;;;;;;;;;;;;;kDAI3E,6LAAC;wCAAI,WAAU;;4CACZ,QAAQ,MAAM,CAAC,MAAM;4CAAC;;;;;;;;;;;;;0CAK3B,6LAAC;gCAAI,WAAU;;kDACb,6LAAC;wCAAG,WAAU;kDACX,QAAQ,KAAK;;;;;;kDAEhB,6LAAC;wCAAE,WAAU;kDACV,QAAQ,WAAW;;;;;;kDAGtB,6LAAC;wCAAI,WAAU;;0DACb,6LAAC;gDAAI,WAAU;;kEACb,6LAAC;wDAAI,WAAU;wDAAe,MAAK;wDAAO,QAAO;wDAAe,SAAQ;kEACtE,cAAA,6LAAC;4DAAK,eAAc;4DAAQ,gBAAe;4DAAQ,aAAY;4DAAI,GAAE;;;;;;;;;;;oDAEtE,IAAI,KAAK,QAAQ,SAAS,EAAE,kBAAkB;;;;;;;0DAEjD,6LAAC;gDAAI,WAAU;;oDAAwC;oDAChD,QAAQ,EAAE;;;;;;;;;;;;;kDAKnB,6LAAC;wCAAI,WAAU;;0DACb,6LAAC;gDACC,SAAS,IAAM,WAAW,QAAQ,EAAE;gDACpC,WAAU;;kEAEV,6LAAC;wDAAI,WAAU;wDAAe,MAAK;wDAAO,QAAO;wDAAe,SAAQ;kEACtE,cAAA,6LAAC;4DAAK,eAAc;4DAAQ,gBAAe;4DAAQ,aAAY;4DAAI,GAAE;;;;;;;;;;;oDACjE;;;;;;;0DAIR,6LAAC;gDACC,SAAS,IAAM,iBAAiB,QAAQ,EAAE;gDAC1C,UAAU,eAAe,QAAQ,EAAE;gDACnC,WAAU;0DAET,eAAe,QAAQ,EAAE,iBACxB;;sEACE,6LAAC;4DAAI,WAAU;4DAA4B,MAAK;4DAAO,QAAO;4DAAe,SAAQ;;8EACnF,6LAAC;oEAAO,WAAU;oEAAa,IAAG;oEAAK,IAAG;oEAAK,GAAE;oEAAK,QAAO;oEAAe,aAAY;;;;;;8EACxF,6LAAC;oEAAK,WAAU;oEAAa,MAAK;oEAAe,GAAE;;;;;;;;;;;;wDAC/C;;iFAIR;;sEACE,6LAAC;4DAAI,WAAU;4DAAe,MAAK;4DAAO,QAAO;4DAAe,SAAQ;sEACtE,cAAA,6LAAC;gEAAK,eAAc;gEAAQ,gBAAe;gEAAQ,aAAY;gEAAI,GAAE;;;;;;;;;;;wDACjE;;;;;;;;;;;;;;;;;;;;;uBAzEX,QAAQ,EAAE;;;;;;;;;;YAsFtB,+BACC,6LAAC;gBAAI,WAAU;0BACb,cAAA,6LAAC;oBAAI,WAAU;;sCACb,6LAAC;4BAAG,WAAU;sCAA2C;;;;;;sCACzD,6LAAC;4BAAE,WAAU;sCAAqB;;;;;;sCAGlC,6LAAC;4BAAI,WAAU;;8CACb,6LAAC;oCACC,SAAS,IAAM,iBAAiB;oCAChC,WAAU;8CACX;;;;;;8CAGD,6LAAC;oCACC,SAAS,IAAM,aAAa;oCAC5B,WAAU;8CACX;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AASf;GA1NwB;;QAMP,kJAAS;;;KANF"}}]
}